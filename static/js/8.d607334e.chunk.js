(this["webpackJsonpxpa-exchange"]=this["webpackJsonpxpa-exchange"]||[]).push([[8,3],{595:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(73);a(596);t.a=Object(c.b)()((function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Powered by"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://www.tideisun.com/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:"/img/logo-lite.png",alt:"tideisun"}))),r.a.createElement("p",null,"Copyright",r.a.createElement("span",null,"\xa9"),"TideiSun. All rights reserved."))}))},596:function(e,t,a){},599:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(181),r=function(e,t,a,r,c,s,i){return new Promise((function(r){var o=c.userActions;a?o.userGet$({wallet:e,password:t,key:a}):o.userGet$({wallet:e,observer:!0}),window.dbObj.ref("operatorBooks").orderByChild("user").equalTo("0x".concat(e.address)).on("value",(function(e){o.historyGet$(Object.values(e.val()||[]))})),s&&n.z(s.address,e.address,i).then((function(){})),function(e){setInterval((function(){e.userActions.accountGet$()}),15e3)}(c),r()}))}},600:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=(a(616),function(e){return r.a.createElement("div",{className:"c_prompt"},r.a.createElement("img",{src:"/img/icon/ic-help".concat(1===e.type?"-gray":"",".svg"),alt:"question mark"}),r.a.createElement("div",null,e.message))});c.defaultProps={type:1},t.a=c},605:function(e,t,a){"use strict";var n=a(4),r=a(6),c=a(13),s=a(12),i=a(0),o=a.n(i),l=a(637),u=a.n(l);a(639);t.a=function(e){return function(t){Object(c.a)(i,t);var a=Object(s.a)(i);function i(e){var t;return Object(n.a)(this,i),(t=a.call(this,e)).state={},t}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e=this.props.actions,t=e.bookActions;e.userActions,e.modalActions;u.a.apps.length||(u.a.initializeApp(finalConfig.fdb),window.dbObj=u.a.database()),window.dbObj.ref("tokenList").once("value",(function(e){e.val()&&(t.tokenListGet(e.val()),t.getFillBook$(e.val()),t.bookGet$())})),window.dbObj.ref("priceBooks").on("value",(function(e){e.val()&&t.recentTransactionGet$(Object.values(e.val()))}))}},{key:"componentWillUnmount",value:function(){window.dbObj.ref("tokenList").off("value"),window.dbObj.ref("priceBooks").off("value"),window.dbObj.ref("orderBooks").off("value")}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}]),i}(o.a.Component)}},616:function(e,t,a){},617:function(e,t,a){"use strict";var n=a(4),r=a(6),c=a(31),s=a(13),i=a(12),o=a(0),l=a.n(o),u=a(73),d=a(594),m=a.n(d),p=a(599),h=a(600),b=(a(618),a(181)),f=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r.importWallet=r.importWallet.bind(Object(c.a)(r)),r.createWallet=r.createWallet.bind(Object(c.a)(r)),r.observe=r.observe.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return!m()(e,this.props)||!m()(t,this.state)}},{key:"createWallet",value:function(){this.props.modalControl.open("create",{message:this.props.t("notDownloadWallet")})}},{key:"importWallet",value:function(){this.props.modalControl.open("import")}},{key:"observe",value:function(){var e=this,t=function(t){Object(p.a)({address:t},"","metamask","",e.props.actions)};b.A((function(e){t(e)})),b.y((function(e){t(e)}))}},{key:"render",value:function(){var e=this.props.t;return l.a.createElement("div",{className:"c_login"},l.a.createElement("ul",null,l.a.createElement("li",{className:"button",onClick:this.importWallet},l.a.createElement("span",null,e("importWallet"))),l.a.createElement("li",{className:"button",onClick:this.createWallet},l.a.createElement("span",null,e("createWallet"))),l.a.createElement("li",{className:"unique",onClick:this.observe},l.a.createElement("span",null,"MetaMask"),l.a.createElement(h.a,{type:2,message:e("prompt.obsever")}),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}))))}}]),a}(l.a.Component);f.defaultProps={t:function(){}},t.a=Object(u.b)("account",{wait:!0})(f)},618:function(e,t,a){},619:function(e,t,a){"use strict";a.r(t),a.d(t,"changeMortgageRate",(function(){return o})),a.d(t,"changeEquivalentAmount",(function(){return l})),a.d(t,"changeUsableAmount",(function(){return u})),a.d(t,"changeLoanAmount",(function(){return d})),a.d(t,"changeRemainingAmount",(function(){return m})),a.d(t,"changeUsableXPA",(function(){return p})),a.d(t,"mortgageLogout",(function(){return h})),a.d(t,"changeMortgagePrice",(function(){return b}));var n=a(18),r=a.n(n),c=a(39),s=a(52),i=a(181),o=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.q)(e);case 2:n=t.sent,a({type:s.d,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.n)(e);case 2:n=t.sent,a({type:s.a,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.l)(e,"usable");case 2:n=t.sent,a({type:s.f,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.l)(e,"loan");case 2:n=t.sent,a({type:s.b,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.l)(e,"remaining");case 2:n=t.sent,a({type:s.e,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.r)(e);case 2:n=t.sent,a({type:s.g,data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(){return{type:s.h}},b=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.p)();case 2:a=e.sent,t({type:s.c,data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},621:function(e,t,a){"use strict";var n=a(4),r=a(6),c=a(31),s=a(13),i=a(12),o=a(0),l=a.n(o),u=a(8),d=a.n(u),m=a(105),p=a(73),h=a(599),b=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={downloadHref:"",password:"",wallet:"",message:"",passwordType:!0},r.readFile=r.readFile.bind(Object(c.a)(r)),r.submitImport=r.submitImport.bind(Object(c.a)(r)),r.handleChange=r.handleChange.bind(Object(c.a)(r)),r.wallet=null,r}return Object(r.a)(a,[{key:"handleChange",value:function(e){this.setState(d()(this.state,{password:{$set:e.target.value},message:{$set:""}}))}},{key:"readFile",value:function(){var e=this,t=this.import.files[0],a=new FileReader;a.onload=function(t){e.wallet=JSON.parse(t.target.result),e.setState(d()(e.state,{wallet:{$set:e.wallet},message:{$set:""}}));var a=Object.keys(e.wallet).map((function(e){return e.toLowerCase()}));if(-1===a.indexOf("address")||-1===a.indexOf("id")||-1===a.indexOf("crypto")){var n=e.props.t;e.setState(d()(e.state,{message:{$set:n("walletError")}}))}e.import.value=""},a.readAsText(t)}},{key:"submitImport",value:function(){var e=this,t=this.props,a=t.actions,n=t.t,r=t.tokenList,c=this.state,s=c.wallet,i=c.password;if(!this.wallet)return this.setState(d()(this.state,{message:{$set:n("importAlert")}}));return a.modalActions.updateLoading(!0),a.modalActions.updateMessage(n("importing")),new Promise((function(t,a){var n=new Worker("/js/recoverKeyWorker.js");n.onmessage=function(n){setTimeout((function(){"error"===n.data&&a(),e.key=n.data,t(e.key)}),300)},n.postMessage({wallet:s,password:i})})).then((function(){e.setState(d()(e.state,{downloadHref:{$set:""}})),Object(h.a)(s,i,e.key,r,a,"","").then((function(){a.modalActions.updateLoading(!1),e.props.modalControl.close()}))})).catch((function(t){console.warn(t),e.setState(d()(e.state,{message:{$set:n("importError")}})),a.modalActions.updateLoading(!1)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.passwordType,n=t.wallet,r=t.message,c=this.props.t;return l.a.createElement("div",{className:"c_importWallet"},l.a.createElement("p",{className:"modal-title"},c("importWallet")),l.a.createElement("a",{className:"import"},l.a.createElement("input",{className:"import-input",ref:function(t){e.import=t},accept:".json",type:"file",onChange:this.readFile,disabled:this.props.loading}),c("importWallet")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"address"},l.a.createElement("div",null,c("address")),l.a.createElement("div",null,n.address?n.address:"")),l.a.createElement("div",{className:"modal-input"},l.a.createElement("label",{htmlFor:"password"},c("yourPassword")),l.a.createElement("div",{className:""===r?"":"error","data-message":r},l.a.createElement("input",{type:a?"password":"text",onChange:this.handleChange,disabled:this.props.loading,required:!0}))),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"show-password"},l.a.createElement("input",{type:"checkbox",onChange:function(){e.setState(d()(e.state,{passwordType:{$set:!e.state.passwordType}}))}}),"\xa0\xa0",c("showPassword")))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:this.props.modalControl.close},l.a.createElement("span",null,c("cancel"))),l.a.createElement("div",{className:"button",onClick:this.submitImport},l.a.createElement("span",null,c("import")))))}}]),a}(l.a.Component);b.defaultProp={t:function(){}};var f=Object(p.b)("account",{wait:!0})(b),v=a(665),g=a.n(v),k=(a(642),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.password;return l.a.createElement("div",{className:"c_password-meter"},l.a.createElement("div",{className:function(){if(""===e)return"none";switch(g()(e).score){case 0:return"risk";case 1:return"weak";case 2:return"normal";case 3:return"safly";case 4:return"strong";default:return"none"}}()}))}}]),a}(l.a.Component));k.defaultProps={t:function(){}};var y=Object(p.b)()(k),O=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={password:"",passwordType:!0},r.handleChange=r.handleChange.bind(Object(c.a)(r)),r.submitCreate=r.submitCreate.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onbeforeunload=function(t){if(e.state.download){return t.returnValue="Dialog text here","Dialog text here"}}}},{key:"componentWillUnmount",value:function(){window.onbeforeunload=null}},{key:"handleChange",value:function(e){this.setState(d()(this.state,{password:{$set:e.target.value}}))}},{key:"submitCreate",value:function(){var e=this,t=this.props,a=t.actions,n=t.modalControl,r=t.t;if(this.state.password.length<8)return this.props.toastOpen(r("passwordRequired"));var c=function(){a.modalActions.updateLoading(!0),a.modalActions.updateMessage(e.props.t("creating"));return new Promise((function(t,a){var n=e.state.password,r=new Worker("/js/createKeyWorker.js");r.onmessage=function(e){setTimeout((function(){e.data.error&&a(e.data.error),t(e.data)}),300)},r.postMessage({password:n})})).then((function(t){e.key=t.key;var c=finalConfig.production?"":{address:"da5acb19966aff9b4d9cf96800de46f7ffa93db5",crypto:{cipher:"aes-128-ctr",ciphertext:"093c35acd2fe31abad157d9895a52ab41d9d063ac3060eb89dc50134f7150890",cipherparams:{iv:"c6cf2f52298b7c565522465d99d5735b"},mac:"fba07854d84acc672aedddee1a394115c8b3f6bbc5a4d99b4f1455e32269cea3",kdf:"scrypt",kdfparams:{dklen:32,n:262144,r:1,p:8,salt:"c55af92bf301b96bb67cddb5036b6af98293b724775d1c0675895670bb536d23"}},id:"2a246859-80fb-4811-892e-0b81e287103d",version:3},s=finalConfig.production?"":"5e1bda1beb2c82e07fd2c493ce9f0b940fcea99fb757cae57f6eb8611604f407";Object(h.a)(t.wallet,t.password,e.key,e.props.tokenList,e.props.actions,c,s).then((function(){e.state.password&&e.setState(d()(e.state,{password:{$set:""}})),a.modalActions.updateLoading(!1),a.userActions.changeKeep(!0),n.open("exportWallet",{wallet:t.wallet,downloadHref:"data:".concat(t.data),message:r("notDownloadWallet")})}))})).catch(console.log)};if(!this.state.password)return this.props.modalControl.open("checkPassword",{exec:c});c()}},{key:"render",value:function(){var e=this,t=this.state,a=t.passwordType,n=t.password,r=this.props.t;return l.a.createElement("div",null,l.a.createElement("p",{className:"modal-title"},r("createNew")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-input"},l.a.createElement("label",{htmlFor:"password"},r("setPassword")),l.a.createElement("div",null,l.a.createElement("input",{type:a?"password":"text",onChange:this.handleChange,placeholder:r("enterPassword"),disabled:this.props.loading}))),l.a.createElement("div",{className:"meter"},l.a.createElement(y,{password:n}),l.a.createElement("p",null,"(",r("passwordRequired"),")")),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"show-password"},l.a.createElement("input",{type:"checkbox",onChange:function(){e.setState(d()(e.state,{passwordType:{$set:!e.state.passwordType}}))}}),"\xa0\xa0",r("showPassword")))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:this.props.modalControl.close},l.a.createElement("span",null,r("cancel"))),l.a.createElement("div",{className:"button",onClick:this.submitCreate},l.a.createElement("span",null,r("create")))))}}]),a}(l.a.Component);O.defaultProps={t:function(){}};var E=Object(p.b)("account",{wait:!0})(O),j=a(609),w=a.n(j),N=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onbeforeunload=function(t){if(e.state.download){return t.returnValue="Dialog text here","Dialog text here"}}}},{key:"componentWillUnmount",value:function(){window.onbeforeunload=null}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.value;return l.a.createElement("div",null,l.a.createElement("p",{className:"modal-title"},a("createNew")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",null,l.a.createElement("div",null,a("yourWallet")),l.a.createElement("div",null,"0x".concat(n.wallet.address.replace("0x","")))),l.a.createElement("div",{className:"canvas"},l.a.createElement("div",{className:"qrcode"},l.a.createElement(w.a,{value:JSON.stringify(n.wallet),size:120})))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("a",{href:n.downloadHref,download:"keyStore.json",className:"button margin-none",target:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?"_blank":"",onClick:function(){e.props.modalControl.close(),e.props.actions.userActions.changeKeep(!1)}},l.a.createElement("span",null,a("downloadWallet")))))}}]),a}(l.a.Component);N.defaultProps={t:function(){}};var x=Object(p.b)("account",{wait:!0})(N),C=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={address:"",message:""},r.handleChange=r.handleChange.bind(Object(c.a)(r)),r.submit=r.submit.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"handleChange",value:function(e){this.setState(d()(this.state,{address:{$set:e.target.value},message:{$set:""}}))}},{key:"submit",value:function(){var e=this.props,t=e.t,a=e.actions,n=e.tokenList,r=e.modalControl,c=this.state.address;if(""!==c){if(/^0x[a-fA-F0-9]{40}$/.test(c)||/[a-fA-F0-9]{40}$/.test(c)){var s={address:c.replace("0x","").toLowerCase()};Object(h.a)(s,"","",n,a).then((function(){r.close()}))}else this.setState(d()(this.state,{message:{$set:t("addressFormatError")}}))}}},{key:"render",value:function(){var e=this.props.t,t=this.state.message;return l.a.createElement("div",{className:"c_observer"},l.a.createElement("div",{className:"modal-title"},e("enterAddress")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",null,e("observeEnter")),l.a.createElement("div",{className:"modal-input"},l.a.createElement("label",{htmlFor:"address"},e("enterAddress")),l.a.createElement("div",{className:""===t?"":"error","data-message":t},l.a.createElement("input",{id:"address",type:"text",value:this.state.address,onChange:this.handleChange})))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:this.submit},l.a.createElement("span",null,e("importAddress")))))}}]),a}(l.a.Component);C.defaultProp={t:function(){}};var P=Object(p.b)("account",{wait:!0})(C),S=a(18),T=a.n(S),A=a(39),L=a(181),$=a(3),M=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={checked:!1},r.renderBtn=r.renderBtn.bind(Object(c.a)(r)),r.submit=r.submit.bind(Object(c.a)(r)),r.check=r.check.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.check()}},{key:"shouldComponentUpdate",value:function(e,t){return e.value.type!==this.props.value.type||t.checked!==this.state.checked}},{key:"check",value:function(){var e=Object(A.a)(T.a.mark((function e(){var t,a,n,r,c,s=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.value,n=t.user,r=t.actions,"cancel"!==a.type){e.next=5;break}return this.setState(d()(this.state,{checked:{$set:!0}})),r.userActions.changeKeep(!1),e.abrupt("return");case 5:if(a.fromToken.address!==finalConfig.ethAddress){e.next=9;break}return this.setState(d()(this.state,{checked:{$set:!0}})),r.userActions.changeKeep(!1),e.abrupt("return");case 9:return e.next=11,Object(L.v)(a.fromToken,n.wallet.address);case 11:if(c=e.sent,"approveZero"!==a.type||0!==parseInt(c,16)){e.next=16;break}return e.abrupt("return",this.setState(d()(this.state,{checked:{$set:!0}})));case 16:"approve"===a.type&&parseInt(c,16)>=Number(Object($.a)(a.fromToken.amount).toString())?this.setState(d()(this.state,{checked:{$set:!0}})):"sign"===a.type&&parseInt(c,16)<Number(Object($.a)(a.fromToken.amount).toString())?(this.setState(d()(this.state,{checked:{$set:!0}})),r.userActions.changeKeep(!1)):setTimeout((function(){s.check()}),5e3);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=this.props,t=e.value,a=e.modalControl,n=e.actions;this.state.checked&&("approve"===t.type||"approveZero"===t.type?(t.exec(),this.setState(d()(this.state,{checked:{$set:!1}}))):(n.userActions.changeKeep(!1),a.close()))}},{key:"renderBtn",value:function(){var e=this.state.checked,t=this.props,a=t.value,n=t.t;return"approve"===a.type||"approveZero"===a.type?l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:e?"button":"block",onClick:this.submit},l.a.createElement("span",null,n("next")))):l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:e?"button":"block",onClick:this.submit},l.a.createElement("span",null,n("finish"))))}},{key:"render",value:function(){var e=this.props,t=e.t,a=e.value;return l.a.createElement("div",{className:"c_observerQr"},l.a.createElement("div",{className:"modal-title"},"approve"===a.type||"approveZero"===a.type?t("checkBalance"):t("confirmSign")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("p",null,"approveZero"===a.type?t("observerFix"):t("observeConfirm"))),l.a.createElement("div",{className:"canvas-holder"},l.a.createElement("div",{className:"qrcode"},l.a.createElement(w.a,{value:a.qrcode,size:200}))),this.renderBtn())}}]),a}(l.a.Component);M.defaultProps={t:function(){}};var W=Object(p.b)("account",{wait:!0})(M),F=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.t,n=t.type,r=t.fromToken,c=t.toToken,s=t.fee,i=t.fromDecimal,o=t.toDecimal;return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-title"},"buy"===n?"".concat(a("buy")).concat(c.token):"".concat(a("sell")).concat(r.token)),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"detail"},l.a.createElement("div",null,l.a.createElement("div",null,a("actionMessage"),"buy"===n?"".concat(a("buy")).concat(c.token):"".concat(a("sell")).concat(r.token)),l.a.createElement("div",null,Object($.l)(Object($.a)(r.amount).toString(),-i)," ",r.token," : ",Object($.l)(Object($.a)(c.amount).toString(),-o)," ",c.token),l.a.createElement("div",null,a("gas")," \u2248 ",Object($.h)(t.gas)," ETH"),l.a.createElement("div",null,a("fee")," \u2248 ",s?"".concat(Object($.l)(s,-o)," ").concat(c.token):0)),l.a.createElement("img",{src:"/img/walletalert.png",alt:"wallet"}))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("button",{className:"submit ".concat(n),onClick:function(){t.exec()}},"buy"===n?"".concat(a("buy")).concat(c.token):"".concat(a("sell")).concat(r.token))))}}]),a}(l.a.Component);F.defaultProps={t:function(){}};var _=Object(p.b)("account",{wait:!0})(F),B=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.value;return l.a.createElement("div",{className:"c_cancelOrder"},l.a.createElement("div",{className:"modal-title"},t("table.cancelOrder")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("p",{className:"cancel-item"},"".concat(t("table.desc"),": ").concat(a.desc)),l.a.createElement("p",{className:"cancel-item"},"".concat(t("table.price"),": ").concat(a.price)),l.a.createElement("p",{className:"cancel-item"},"".concat(t("table.amount"),": ").concat(Object($.e)(8,a.amount))),l.a.createElement("p",{className:"cancel-item"},t("table.gas")," \u2248 ",Object($.h)(a.gas)," ETH")),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:a.exec},l.a.createElement("span",null,t("table.confirm")))))}}]),a}(l.a.Component);B.defaultProps={t:function(){}};var D=Object(p.b)()(B),I=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r.create=r.create.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"create",value:function(){this.props.value.exec()}},{key:"render",value:function(){var e=this,t=this.props.t;return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-content"},l.a.createElement("p",{className:"warning"},t("creatWithoutPassWord"))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:function(){e.props.modalControl.open("create")}},l.a.createElement("span",null,t("cancel"))),l.a.createElement("div",{className:"button",onClick:this.create},l.a.createElement("span",null,t("create")))))}}]),a}(l.a.Component);I.defaultProps={t:function(){}};var q=Object(p.b)("account",{wait:!0})(I),K=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.t,n=e.modalControl;return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-title"},a("sent")),l.a.createElement("div",{className:"modal-content"},l.a.createElement("p",{className:"receipt-title"},a("txMessage")),l.a.createElement("a",{className:"receipt",href:"https://etherscan.io/tx/".concat(t.receipt),target:"_blank"},t.receipt)),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:function(){n.close()}},l.a.createElement("span",null,a("finish")))))}}]),a}(l.a.Component);K.defaultProps={t:function(){}};var U=Object(p.b)("account",{wait:!0})(K),H=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.t,n=function(){switch(t.type){case"mortgage":return a("mortgage.Mortgage");case"withdraw":return a("mortgage.Withdraw");case"repayment":return a("mortgage.Repayment");default:return""}};return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-title"},n(),"mortgage"===t.type?t.fromToken.token:t.toToken.token),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"detail"},l.a.createElement("div",null,l.a.createElement("div",null,"mortgage"===t.type?"".concat(t.fromToken.amount," ").concat(t.fromToken.token):"".concat(t.toToken.amount," ").concat(t.toToken.token)),l.a.createElement("div",null,a("gas")," \u2248 ",Object($.h)(t.gas)," ETH"),l.a.createElement("div",null,a("fee")," \u2248 ",t.fee?"".concat(t.fee," ").concat(t.toToken.token):0)),l.a.createElement("img",{src:"/img/walletalert.png",alt:"wallet"}))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:function(){t.exec()}},l.a.createElement("span",null,n(),"mortgage"===t.type?t.fromToken.token:t.toToken.token))))}}]),a}(l.a.Component);H.defaultProps={t:function(){}};var G=Object(p.b)("account",{wait:!0})(H),Q=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.t;return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-title"},a("mortgage.offset"),t.toToken.token),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"detail"},l.a.createElement("div",null,l.a.createElement("div",null,a("gas")," \u2248 ",Object($.h)(t.gas)," ETH"),l.a.createElement("div",null,a("fee")," \u2248 ","".concat(t.fee," XPA"))),l.a.createElement("img",{src:"/img/walletalert.png",alt:"wallet"}))),l.a.createElement("div",{className:"modal-btn"},l.a.createElement("div",{className:"button",onClick:function(){t.exec()}},l.a.createElement("span",null,a("mortgage.offset"),t.toToken.token))))}}]),a}(l.a.Component);Q.defaultProps={t:function(){}};var z,R=Object(p.b)("account",{wait:!0})(Q),V=(a(643),Object(p.b)(["common"],{wait:!0})(z=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={fade:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({fade:"fadeIn"})}),1)}},{key:"renderView",value:function(){var e=this.props,t=e.actions,a=e.loading,n=e.tokenList,r=e.modalControl,c=e.value,s=e.user,i=e.toastOpen;if(this.state.fade){switch(this.props.view){case"import":return l.a.createElement(f,{actions:t,loading:a,tokenList:n,modalControl:r});case"create":return l.a.createElement(E,{actions:t,loading:a,tokenList:n,modalControl:r,toastOpen:i});case"observer":return l.a.createElement(P,{actions:t,loading:a,modalControl:r,tokenList:n});case"observerQr":return l.a.createElement(W,{value:c,modalControl:r,user:s,actions:t});case"transaction":return l.a.createElement(_,{actions:t,value:c});case"cancelOrder":return l.a.createElement(D,{value:c});case"checkPassword":return l.a.createElement(q,{modalControl:r,value:c});case"exportWallet":return l.a.createElement(x,{modalControl:r,value:c,user:s,actions:t});case"mortgage":return l.a.createElement(G,{modalControl:r,value:c,user:s,actions:t});case"offset":return l.a.createElement(R,{modalControl:r,value:c,user:s,actions:t});case"receipt":return l.a.createElement(U,{modalControl:r,value:c})}return null}return null}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"c_modal ".concat(this.state.fade)},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"head"},l.a.createElement("div",{onClick:function(){if(e.props.keep)return e.props.toastOpen(e.props.value.message);e.props.modalControl.close()}},l.a.createElement("img",{src:"/img/icon/ic-close.svg",alt:"close"}))),l.a.createElement("div",{className:"content"},this.renderView())))}}]),a}(l.a.Component))||z);V.defaultProps={view:{},value:{},keep:!1};var X=V,Z=(a(644),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={style:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState(d()(e.state,{style:{$set:"fadeIn"}}))}),1)}},{key:"render",value:function(){return l.a.createElement("div",{className:"c_toast ".concat(this.state.style)},this.props.message)}}]),a}(l.a.Component));Z.defaultProps={message:""};var J=Z,Y=(a(645),function(e){return l.a.createElement("div",{className:"c_loading"},l.a.createElement("p",null,e.title),l.a.createElement("div",{className:"loader"}))}),ee=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={modal:!1,view:"",value:"",toast:!1,toastMessage:""},r.modalOpen=r.modalOpen.bind(Object(c.a)(r)),r.modalClose=r.modalClose.bind(Object(c.a)(r)),r.toastOpen=r.toastOpen.bind(Object(c.a)(r)),r.modalControl={open:r.modalOpen,close:r.modalClose},r.timeout=null,r}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){this.timeout=null}},{key:"modalOpen",value:function(e,t){this.setState(d()(this.state,{modal:{$set:!0},view:{$set:e},value:{$set:t}}))}},{key:"modalClose",value:function(){this.setState(d()(this.state,{modal:{$set:!1}}))}},{key:"toastOpen",value:function(e){var t=this;this.setState(d()(this.state,{toast:{$set:!0},toastMessage:{$set:e}}),(function(){clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.state.toast&&t.setState(d()(t.state,{toast:{$set:!1}}))}),2500)}))}},{key:"renderModal",value:function(){return this.state.modal?Object(m.createPortal)(l.a.createElement(X,{view:this.state.view,value:this.state.value,modalControl:this.modalControl,actions:this.props.actions,loading:this.props.loading,tokenList:this.props.tokenList,keep:this.props.keep,toastOpen:this.toastOpen,user:this.props.user}),document.getElementsByTagName("body")[0]):null}},{key:"renderLoading",value:function(){return this.props.loading?l.a.createElement(Y,{title:this.props.message}):null}},{key:"renderToast",value:function(){return this.state.toast?Object(m.createPortal)(l.a.createElement(J,{message:this.state.toastMessage}),document.getElementsByTagName("body")[0]):null}},{key:"render",value:function(){return l.a.createElement("div",null,this.renderModal(),this.renderToast(),this.props.children(this.modalControl,this.toastOpen),this.renderLoading())}}]),a}(l.a.Component);ee.defaultProps={actions:{},message:"",loading:!1,keep:!1,tokenList:[],user:{}};t.a=ee},640:function(e,t,a){"use strict";a.r(t),a.d(t,"getNews",(function(){return o}));var n=a(18),r=a.n(n),c=a(39),s=a(183),i=finalConfig.news;function o(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://newsapi.org/v2/everything?sources=".concat(finalConfig.news.source,"&apiKey=").concat(i.apiKey,"&q=").concat(i.query));case 2:a=e.sent,t({type:s.a,data:a.body.articles});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},642:function(e,t,a){},643:function(e,t,a){},644:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){"use strict";var n=a(74),r=a(4),c=a(6),s=a(31),i=a(13),o=a(12),l=a(0),u=a.n(l),d=a(73),m=a(594),p=a.n(m),h=a(636),b=a(3),f=(a(648),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n.getPrice=n.getPrice.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e){return!p()(e.book,this.props.book)||!p()(e.t,this.props.t)}},{key:"componentDidUpdate",value:function(){var e=document.querySelector(".c_orderBook .sell > div:last-child");!this.props.reverse&&"sell"===this.props.type&&e&&(-1!==navigator.userAgent.toLowerCase().indexOf("safari")&&e.scrollIntoView({block:"end"}))}},{key:"getPrice",value:function(e){var t=this.props,a=t.actions,n=t.myTransaction,r=t.to,c=t.changePrice,s=t.toastOpen,i=t.t,o=document.querySelector(".pending-type .active");if(o&&"2"!==o.dataset.type){c(e.displayPrice);var l=a.userActions.myTransactionChange,u=0;u=n.act===e.type&&"sell"===n.act||n.act===e.type&&"buy"===n.act?e.price:Object(b.b)(Object(b.l)(1,36)).div(Object(b.a)(e.price)).toString(16);var d="sell"===n.act?Object(b.b)(Object(b.l)(Object(b.a)(n.amount).mul(Object(b.a)(u)).toString(),-18).split(".")[0]).toString(16):Object(b.b)(Object(b.l)(Object(b.b)(Object(b.l)(Object(b.a)(n.amount).toString(),18)).div(Object(b.a)(u)).toString(),r.decimal-18)).toString(16),m=Object(b.l)(Object(b.a)(d).toString(),-r.decimal)>Math.pow(10,9),p=Object(b.l)(Object(b.a)(d).toString(),-r.decimal)<Math.pow(10,-2);return l({price:u,amount:n.amount,able:!(!n.amount||m||p),total:n.amount?d:"-",act:this.props.myTransaction.act}),m?s("Total ".concat(r.token).concat(i("table.max")).concat(Math.pow(10,9))):p?s("Total ".concat(r.token).concat(i("table.min")).concat(Math.pow(10,-2))):void 0}}},{key:"renderTable",value:function(){var e,t=this,a=this.props,r=a.book,c=a.type,s=a.t,i=a.reverse,o=a.from,l=a.to,d=null,m=Object(n.a)(r);if(r.length>0){/order/.test(window.location.hash)||(m="buy"===c?m.slice(0,7):m.reverse().slice(0,7)),i?m.sort((function(e,t){return e.displayPrice-t.displayPrice})):m.sort((function(e,t){return t.displayPrice-e.displayPrice})),e=m.reduce((function(e,t){return Number(t.amount)>e?Number(t.amount):e}),m[0].amount),d=m.map((function(a,n){var r="buy"===c?Object(b.d)(a.price,o.decimal,l.decimal):Object(b.j)(a.price,o.decimal,l.decimal);return u.a.createElement("div",{key:a.index||n,onClick:function(){t.getPrice(a)}},u.a.createElement("div",{className:"buy"===c?"type green":"type red"},"buy"!==c||i?"".concat(s("table.sell")," ").concat(i?n+1:m.length-n):"".concat(s("table.buy")," ").concat(n+1)),u.a.createElement("div",{className:"list"},u.a.createElement("div",{"data-tip":!0,"data-for":"price".concat(a.type).concat(n)},a.displayPrice),u.a.createElement(h.a,{id:"price".concat(a.type).concat(n),place:"right"},r),u.a.createElement("div",{className:"item","data-tip":!0,"data-for":"amount".concat(a.type).concat(n)},Object(b.e)(8,Number(a.amount))),u.a.createElement(h.a,{id:"amount".concat(a.type).concat(n),place:"right"},a.amount),u.a.createElement("div",{className:"item","data-tip":!0,"data-for":"value".concat(a.type).concat(n)},Object(b.e)(8,Number(a.value))),u.a.createElement(h.a,{id:"value".concat(a.type).concat(n),place:"right"},a.value),u.a.createElement("div",{className:"buy"===c?" percent buy":"percent sell",style:{width:"".concat(a.amount/e*100,"%")}})))}))}return u.a.createElement("div",{className:"books"},u.a.createElement("div",{className:"sell"===c?"sell order":"buy order"},d))}},{key:"render",value:function(){return u.a.createElement("div",{className:"c_orderBook"},this.renderTable())}}]),a}(u.a.Component));f.defaultProps={t:function(){},reverse:!1,actions:{},myTransaction:{},from:{},to:{},changePrice:function(){},toastOpen:function(){}},t.a=Object(d.b)()(f)},648:function(e,t,a){},649:function(e,t,a){},718:function(e,t,a){},778:function(e,t,a){},779:function(e,t,a){},780:function(e,t,a){},781:function(e,t,a){},782:function(e,t,a){},783:function(e,t,a){},784:function(e,t,a){},785:function(e,t,a){},786:function(e,t,a){},787:function(e,t,a){},802:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(6),c=a(31),s=a(13),i=a(12),o=a(0),l=a.n(o),u=a(58),d=a(182),m=a(8),p=a.n(m),h=a(73),b=a(283),f=a(594),v=a.n(f),g=a(50),k=a(74),y=a(795),O=a(607),E=a(792),j=a(796),w=a(650),N=a(679),x=a(593),C=(a(718),a(3)),P=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r.middle="",r.distance="",r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(w.a)(this.graph).on("mousemove",(function(){e.movePoint(Object(N.a)(this),e.total)}))}},{key:"componentWillUnmount",value:function(){Object(w.a)(this.graph).on("mousemove",null)}},{key:"chart",value:function(e,t){var a=this.props,n=a.width,r=a.height,c=a.margin,s=n-c.left-c.right,i=r-c.bottom-c.top,o=Object(O.scaleLinear)().domain([e-t,e+t]).range([0,s]),l=Object(O.scaleLinear)().domain([0,1.2*this.maxValue]).range([i,0]),u=Object(E.b)().x((function(e){return o(e.displayPrice)})).y((function(e){return l(e.value)})),d=Object(E.a)().x((function(e){return o(e.displayPrice)})).y0(i).y1((function(e){return l(e.value)})),m=Object(j.a)().scale(o).ticks(7),p=Object(j.b)().scale(l).ticks(5),h=Object(j.a)().scale(o).ticks(7).tickSize(i).tickFormat(""),b=Object(j.b)().scale(l).ticks(5).tickSize(s).tickFormat("");return{w:s,h:i,line:u,area:d,xScale:o,yScale:l,xAxis:m,yAxis:p,xGrid:h,yGrid:b}}},{key:"movePoint",value:function(e,t){var a=this,n=Object(y.a)(e,2),r=n[0],c=(n[1],this.chart(this.middle,this.distance)),s=c.xScale,i=c.yScale,o=c.line,l=this.props.margin,u=s.invert(r-l.left);u<t[0].displayPrice&&(u=t[0].displayPrice),u>t[t.length-1].displayPrice&&(u=t[t.length-1].displayPrice);var d,m,p=(0,Object(x.bisector)((function(e){return e.displayPrice})).left)(t,u,0,t.length),h=function(e){"buy"===e.type&&u>a.left[a.left.length-1].displayPrice&&(u=a.left[a.left.length-1].displayPrice),"sell"===e.type&&u<a.right[0].displayPrice&&(u=a.right[0].displayPrice),"sell"===e.type&&0===e.value&&(e.value=a.right[1].value),Object(w.a)(a.circle).attr("cx",s(u)).attr("cy",i(e.value)),Object(w.a)(a.line).attr("d",o([{displayPrice:u,value:1.2*a.maxValue},{displayPrice:u,value:0}])),Object(w.a)(a.t_displayPrice).attr("fill","#fff"),Object(w.a)(a.rect).attr("fill","rgba(0, 0, 0, 0.6)").attr("stroke","#E7A977").attr("stroke-width",2).attr("stroke-opacity",.7),Object(w.a)(a.info_displayPrice).text("".concat(Object(C.e)(7,u))),Object(w.a)(a.t_amount).attr("fill","#fff"),Object(w.a)(a.info_amount).text("".concat(Object(C.e)(5,e.value))),Object(w.a)(a.text).attr("x",s(u)-60).attr("y",i(e.value)-60),"sell"===e.type?(Object(w.a)(a.info_displayPrice).attr("class","red"),Object(w.a)(a.info_amount).attr("class","red")):(Object(w.a)(a.info_displayPrice).attr("class","green"),Object(w.a)(a.info_amount).attr("class","green"))};if(p>t.length)h(d=t[t.length-1]);else if(0!==p)if(p===t.length)h(d=t[p-1]);else{var b=t[p-1],f=t[p];d=u-b.displayPrice<=f.displayPrice-u?b:f,0===(m=d).value&&(d="sell"===m.type?a.total[a.total.indexOf(m)+1]:a.total[a.total.indexOf(m)-1]),h(d)}else h(t[0])}},{key:"render",value:function(){var e=this,t=this.props,a=t.sell,n=t.buy,r=t.margin;if(0===a.length&&0===n.length)return l.a.createElement("div",{className:"no-result"});var c=this,s=[],i=[];if(this.total=[],this.right=[],this.left=[],a.length>0){s=Object(k.a)(a).sort((function(e,t){return e.displayPrice-t.displayPrice})).reduce((function(e,t){var a=e,n=a.find((function(e){return e.displayPrice===t.displayPrice}));return n?n.amount+=t.amount:a.push(Object.assign({},t)),a}),[]);for(var o=0;o<s.length;o+=1)this.right.push(s[o]),s[o+1]&&this.right.push(Object(g.a)(Object(g.a)({},s[o+1]),{},{value:s[o].value}));this.right.push(Object(g.a)(Object(g.a)({},this.right[this.right.length-1]),{},{displayPrice:Object(C.m)(String(this.right[this.right.length-1].displayPrice),String(1.1))})),this.right.unshift(Object(g.a)(Object(g.a)({},this.right[0]),{},{value:0}))}if(n.length>0){i=Object(k.a)(n).sort((function(e,t){return e.displayPrice-t.displayPrice})).reduce((function(e,t){var a=e,n=a.find((function(e){return e.displayPrice===t.displayPrice}));return n?n.amount+=t.amount:a.push(Object.assign({},t)),a}),[]);for(var u=0;u<i.length;u+=1)this.left.push(i[u]),i[u+1]&&this.left.push(Object(g.a)(Object(g.a)({},i[u]),{},{value:i[u+1].value}));this.left.unshift(Object(g.a)(Object(g.a)({},this.left[0]),{},{displayPrice:.9*this.left[0].displayPrice})),this.left.push(Object(g.a)(Object(g.a)({},this.left[this.left.length-1]),{},{value:0}))}this.total=this.left.concat(this.right),n[0]?a[0]?this.middle=(Number(n[0].displayPrice)+Number(a[a.length-1].displayPrice))/2:this.middle=Number(n[0].displayPrice):this.middle=Number(a[0].displayPrice);var d=this.total[this.total.length-1],m=this.total[0];if(this.distance=d.displayPrice-this.middle>this.middle-m.displayPrice?d.displayPrice-this.middle:this.middle-m.displayPrice,m.displayPrice-this.middle<=0){this.distance=this.middle;var p=this.right.indexOf(this.right.find((function(t){return t.displayPrice>e.middle+e.distance})));p>0&&this.right.splice(p+1,this.right.length-p)}s.length>0&&(this.right[this.right.length-1]=Object(g.a)(Object(g.a)({},this.right[this.right.length-1]),{},{displayPrice:this.middle+this.distance,value:this.right[this.right.length-2].value})),i.length>0&&(this.left[0]=Object(g.a)(Object(g.a)({},this.left[0]),{},{displayPrice:this.middle-this.distance})),this.total=this.left.concat(this.right),Object(w.a)(this.graph).on("mousemove",(function(){c.movePoint(Object(N.a)(this),c.total)})),this.maxValue=this.total[0].value>this.total[this.total.length-1].value?this.total[0].value:this.total[this.total.length-1].value;var h=this.chart(this.middle,this.distance),b=h.w,f=h.h,v=h.line,y=h.area,O=h.xAxis,E=h.yAxis,j=h.xGrid,x=h.yGrid;return l.a.createElement("svg",{className:"c_deepChart",ref:function(t){e.graph=t}},l.a.createElement("g",{style:{transform:"translate(".concat(r.left,"px, ").concat(38+r.bottom,"px)")}},l.a.createElement("path",{className:"line sell-line",d:v(this.right)}),l.a.createElement("path",{className:"area sell-area",d:y(this.right)}),l.a.createElement("path",{className:"line buy-line",d:v(this.left)}),l.a.createElement("path",{className:"area buy-area",d:y(this.left)}),l.a.createElement("path",{className:"line middle-line",d:v([{displayPrice:this.middle,value:1.2*this.maxValue},{displayPrice:this.middle,value:0}])}),l.a.createElement("g",{className:"grid",ref:function(e){return Object(w.a)(e).call(x)}}),l.a.createElement("g",{className:"grid",ref:function(e){return Object(w.a)(e).call(j)}}),l.a.createElement("g",{className:"xAxis",style:{transform:"translateY(".concat(f,"px)")},ref:function(e){return Object(w.a)(e).call(O)}}),l.a.createElement("g",{className:"yAxis",style:{transform:"translateX(".concat(b,"px)")},ref:function(e){return Object(w.a)(e).call(E)}}),l.a.createElement("circle",{cx:"-100",ref:function(t){e.circle=t},className:"circle",r:"5"}),l.a.createElement("path",{className:"point-line",ref:function(t){e.line=t}}),l.a.createElement("svg",{className:"detail",ref:function(t){e.text=t},height:"50"},l.a.createElement("rect",{ref:function(t){e.rect=t},width:"120",height:"46",fill:"transparent"}),l.a.createElement("text",{y:"3",x:"4"},l.a.createElement("tspan",{fill:"transparent",dy:"1.2em",ref:function(t){e.t_displayPrice=t}},"Price",l.a.createElement("tspan",{ref:function(t){e.info_displayPrice=t},className:"info"}))),l.a.createElement("text",{y:"23",x:"4"},l.a.createElement("tspan",{fill:"transparent",dy:"1.2em",ref:function(t){e.t_amount=t}},"Total",l.a.createElement("tspan",{ref:function(t){e.info_amount=t},className:"info"}))))))}}]),a}(l.a.Component),S=a(794),T=a(720),A=a(748),L=a(752),$=a(754),M=a(590),W=a(760),F=a(580),_=a(770),B=Object(F.b)("%Y-%m-%d-%H:%M:%S"),D=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r.range=["10minute","1hr","1day","1month"],r.unit=0,r.tooltipContent=r.tooltipContent.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"tooltipContent",value:function(){var e=this.props.t;return function(t){var a=t.currentItem,n=t.xAccessor;return{x:B(n(a)),y:[{label:"".concat(e("chart.opPrice")," "),value:Object(C.e)(9,a.open)},{label:"".concat(e("chart.htPrice")," "),value:Object(C.e)(9,a.high)},{label:"".concat(e("chart.ltPrice")," "),value:Object(C.e)(9,a.low)},{label:"".concat(e("chart.csPrice")," "),value:Object(C.e)(9,a.close)},{label:"".concat(e("chart.amount")," "),value:Object(C.e)(9,a.amount)},{label:"10ma ",value:Object(C.e)(9,a["10ma"]),stroke:"#f8e71c"},{label:"5ma ",value:Object(C.e)(9,a["5ma"]),stroke:"#77479e"}]}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.width,r=t.height,c=t.ratio,s=t.margin,i=L.discontinuousTimeScaleProvider.inputDateAccessor((function(e){return e.timestamp}))(a),o=i.data,u=i.xScale,d=i.xAccessor,m=i.displayXAccessor;if(n<101||a.length<1)return l.a.createElement("div",null);var p=[d(Object(M.last)(o)),d(o[0])],h={wickStroke:function(e){return e.close<e.open?"#f44173":"#27ca7b"},fill:function(e){return e.close<e.open?"#f44173":"#27ca7b"},stroke:function(e){return e.close<e.open?"#f44173":"#27ca7b"},candleStrokeWidth:1,widthRatio:.8,opacity:1},b=n-s.left-s.right,f={innerTickSize:-1*b,tickStrokeDasharray:"Dot"},v={innerTickSize:-1*b,tickStrokeOpacity:0};return l.a.createElement(S.b,{ref:function(t){e.node=t},height:r,ratio:c,width:n,margin:s,seriesName:"MSFT",data:o,xScale:u,xAccessor:d,displayXAccessor:m,xExtents:p,clamp:!0,pointsPerPxThreshold:1},l.a.createElement(S.a,{id:1,yExtents:function(e){return[1.05*e.high,1.3*e.low]},height:r-140},l.a.createElement(A.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6,stroke:"rgba(255, 255, 255, .5)",tickStroke:"rgba(255, 255, 255, .5)",showTicks:!1}),l.a.createElement(A.YAxis,Object.assign({axisAt:"right",orient:"right",ticks:5,stroke:"#8a8a8a",tickStroke:"#8a8a8a"},f)),l.a.createElement(T.LineSeries,{yAccessor:function(e){return e["5ma"]},stroke:"#77479e"}),l.a.createElement(T.LineSeries,{yAccessor:function(e){return e["10ma"]},stroke:"#f8e71c"}),l.a.createElement(_.CurrentCoordinate,{yAccessor:function(e){return e["5ma"]},fill:"#77479e"}),l.a.createElement(_.CurrentCoordinate,{yAccessor:function(e){return e["10ma"]},fill:"#f8e71c"}),l.a.createElement(T.CandlestickSeries,h),l.a.createElement(W.HoverTooltip,{tooltipContent:this.tooltipContent(),fill:"#000",bgFill:"#D4E2FD",bgOpacity:.5,stroke:"#000",fontFill:"#ddd",opacity:.6,fontSize:14})),l.a.createElement(S.a,{id:2,origin:function(e,t){return[0,t-90]},height:90,yExtents:function(e){return 1.2*e.amount}},l.a.createElement(A.XAxis,Object.assign({axisAt:"bottom",orient:"bottom",stroke:"#8a8a8a",tickStroke:"#8a8a8a"},v)),l.a.createElement(A.YAxis,Object.assign({axisAt:"right",orient:"right",ticks:3,stroke:"#8a8a8a",tickStroke:"#8a8a8a"},v)),l.a.createElement(T.BarSeries,{yAccessor:function(e){return e.amount}})))}}]),a}(l.a.Component);D.defaultProps={t:function(){}};var I=Object(h.b)()(Object($.fitWidth)(D)),q=a(600),K=(a(778),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={width:600,height:360,type:2,margin:{left:20,right:60,top:10,bottom:20},open:!0,toggle:!1,kType:"hour"},r.option="hour",r.changeChart=r.changeChart.bind(Object(c.a)(r)),r.changeKType=r.changeKType.bind(Object(c.a)(r)),r.getKChart=r.getKChart.bind(Object(c.a)(r)),r.showChart=r.showChart.bind(Object(c.a)(r)),r.renderSelect=r.renderSelect.bind(Object(c.a)(r)),r.toggleSelect=r.toggleSelect.bind(Object(c.a)(r)),r.clickOutside=r.clickOutside.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setField()}),100),window.addEventListener("resize",this.updateDimensions.bind(this)),window.addEventListener("click",this.clickOutside)}},{key:"shouldComponentUpdate",value:function(e,t){return!v()(e,this.props)||!v()(t,this.state)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this)),window.removeEventListener("click",this.clickOutside)}},{key:"setField",value:function(){if(this.field){var e=this.field.offsetWidth-30,t=this.field.offsetHeight-20;this.setState(p()(this.state,{width:{$set:e},height:{$set:t}})),window.innerWidth<480&&this.setState(p()(this.state,{margin:{$set:{left:20,right:55,top:20,bottom:30}}}))}}},{key:"getKChart",value:function(e){var t=this.props.actions.bookActions,a=t.timeunitChange,n=t.kLineGet$;a(e),n()}},{key:"clickOutside",value:function(e){var t=document.querySelector(".c_content .toggle"),a=document.querySelector(".c_content .select");t&&!a.contains(e.target)&&this.setState(p()(this.state,{toggle:{$set:!1}}))}},{key:"changeChart",value:function(e){1===e?this.setState(p()(this.state,{margin:{left:{$set:60},right:{$set:90},bottom:{$set:40}},type:{$set:e}})):this.setState(p()(this.state,{margin:{left:{$set:20},right:{$set:60},bottom:{$set:20}},type:{$set:e}}))}},{key:"changeKType",value:function(e){e.stopPropagation();var t=e.currentTarget.dataset.type;switch(t){case"minute":this.getKChart(6e5);break;case"hour":this.getKChart(36e5);break;case"day":this.getKChart(864e5);break;case"month":this.getKChart(2592e6);break;default:this.getKChart(36e5)}this.setState(p()(this.state,{toggle:{$set:!1},kType:{$set:t}}))}},{key:"showChart",value:function(){this.setState(p()(this.state,{open:{$set:!this.state.open}}))}},{key:"toggleSelect",value:function(){this.setState(p()(this.state,{toggle:{$set:!this.state.toggle}}))}},{key:"updateDimensions",value:function(){this.field&&(this.setState({width:this.field.offsetWidth-30,height:this.field.offsetHeight-20}),window.innerWidth<480?this.setState(p()(this.state,{margin:{$set:{left:20,right:55,top:20,bottom:30}}})):window.innerWidth>=480&&1===this.state.type?this.setState(p()(this.state,{margin:{left:{$set:50},right:{$set:80},bottom:{$set:40}}})):this.setState(p()(this.state,{margin:{left:{$set:20},right:{$set:60},bottom:{$set:20}}})))}},{key:"renderChart",value:function(){var e=this.state,t=e.width,a=e.height,n=e.type,r=e.margin,c=this.props,s=c.sell,i=c.buy,o=c.data;return 1===n?l.a.createElement(P,{margin:r,sell:s,buy:i,width:t,height:a}):l.a.createElement(I,{margin:r,data:o,height:a,width:t})}},{key:"renderSelect",value:function(){if(2===this.state.type){var e,t=this.props.t;switch(this.state.kType){case"minute":e=t("chart.10minute");break;case"hour":e=t("chart.hour");break;case"day":e=t("chart.day");break;case"month":e=t("chart.month");break;default:e=t("chart.hour")}return l.a.createElement("div",{className:"unit"},l.a.createElement("div",{className:"select",onClick:this.toggleSelect},l.a.createElement("span",null,e),l.a.createElement("img",{src:"/img/icon/ic-dropdown-p.svg",alt:"dropdown"}),l.a.createElement("div",{className:this.state.toggle?"toggle":"toggle close"},l.a.createElement("div",{"data-type":"minute",onClick:this.changeKType},t("chart.10minute")),l.a.createElement("div",{"data-type":"hour",onClick:this.changeKType},t("chart.hour")),l.a.createElement("div",{"data-type":"day",onClick:this.changeKType},t("chart.day")),l.a.createElement("div",{"data-type":"month",onClick:this.changeKType},t("chart.month")))))}return null}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state.type;return l.a.createElement("div",{className:"c_content"},l.a.createElement("div",{className:"title"},l.a.createElement("div",{className:"control"},l.a.createElement("div",null,l.a.createElement("a",{className:1===a?"switch active":"switch",onClick:function(){e.changeChart(1)}},t("chart.depthChart"),l.a.createElement(q.a,{message:t("prompt.depth")})),l.a.createElement("a",{className:2===a?"switch active":"switch",onClick:function(){e.changeChart(2)}},t("chart.priceChart"),l.a.createElement(q.a,{message:t("prompt.candlestick")}))))),l.a.createElement("div",{className:this.state.open?"dashboard":"dashboard close"},this.renderSelect(),l.a.createElement("div",{className:"chart",ref:function(t){e.field=t}},this.renderChart())))}}]),a}(l.a.Component));K.defaultProps={t:function(){}};var U=Object(h.b)()(K),H=a(80),G=(a(779),a(617)),Q=a(18),z=a.n(Q),R=a(39),V=a(181),X=(a(780),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tmp:-1},r.handleInput=r.handleInput.bind(Object(c.a)(r)),r.openLimitPending=r.openLimitPending.bind(Object(c.a)(r)),r.pending=r.pending.bind(Object(c.a)(r)),r.clickFocus=r.clickFocus.bind(Object(c.a)(r)),r.renderButton=r.renderButton.bind(Object(c.a)(r)),r.timeout=null,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.clickOutside)}},{key:"shouldComponentUpdate",value:function(e,t){return!v()(e,this.props)||!v()(t,this.state)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.clickOutside),this.timeout=null}},{key:"clickFocus",value:function(e){var t=e.currentTarget.dataset.input;this[t].focus(),this.props.handleFocus(t)}},{key:"handleInput",value:function(e){var t=this,a=e.target.name,n=e.target.value;this.props.handleInput(a,n),clearTimeout(this.timeout),this.timeout=setTimeout((function(){var e=t.props,n=e.from,r=e.to,c=e.t,s=e.toastOpen,i=e.handlePreview,o=e.actions,l=e.myTransaction,u=e.price,d=e.amount,m=o.userActions.myTransactionUpdate,p=function(){m({type:"able",value:!1}),m({type:"total",value:"-"})};if(d.value>0&&d.value>Math.pow(10,9))return p(),s("".concat(n.token," ").concat(c("max")).concat(Math.pow(10,9)));if(d.value&&d.value<Math.pow(10,-2))return p(),s("".concat(n.token," ").concat(c("min")).concat(Math.pow(10,-2)));if(Number(d.value)?m({type:"amount",value:Object(C.b)(Object(C.l)(d.value,n.decimal)).toString(16)}):m({type:"amount",value:""}),u.value&&u.value>0){m({type:"price",value:"sell"===l.act?Object(C.b)(Object(C.l)(u.value,18+r.decimal-n.decimal)).toString(16):function(){var e=Object(C.l)(Object(C.b)(Object(C.l)(1,36)).div(Object(C.b)(Object(C.l)(u.value,18))).toString(),n.decimal-r.decimal);return Object(C.b)(e.split(".")[0]).toString(16)}()})}else"price"===a&&m({type:"price",value:""});if(Number(d.value)&&Number(u.value)){var h=Object(C.l)(u.value,18),b=Object(C.l)(d.value,n.decimal),f=Object(C.l)(Object(C.b)(b).mul(Object(C.b)(h)).toString(),-18-n.decimal);if(f>=Math.pow(10,9))return p(),s("Total ".concat(r.token," ").concat(c("max"),"1000000000"));if(f<Math.pow(10,-2))return p(),s("Total ".concat(r.token," ").concat(c("min"),"0.01"));var v=Object(C.b)(Object(C.l)(f,r.decimal)).toString(16);m({type:"total",value:v}),m({type:"able",value:!0}),i(d.value,f)}else p()}),500)}},{key:"openLimitPending",value:function(){var e=Object(R.a)(z.a.mark((function e(){var t,a,n,r,c,s,i,o,l,u,d,m,p,h,b,f,v,y,O,E,j,w,N,x,P,S,T,A,L,$,M,W,F,_,B,D,I,q=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.account,n=t.to,r=t.from,c=t.t,s=t.user,i=t.sellbook,o=t.buybook,l=t.tokenList,u=t.actions,d=t.toastOpen,m=t.myTransaction,p=t.amount,h="",s.wallet){e.next=4;break}return e.abrupt("return",d("".concat(c("importAlert"))));case 4:if("sell"!==m.act){e.next=12;break}if(b=a.find((function(e){return e.address===r.address})),f=Object(C.a)(b.usable),v=Object(C.b)((p.value*Math.pow(10,r.decimal)).toFixed(0)),!f.lt(v)){e.next=10;break}return e.abrupt("return",d("".concat(r.token).concat(c("out"))));case 10:e.next=17;break;case 12:if(y=a.find((function(e){return e.address===n.address})),O=Object(C.a)(y.usable),E=Object(C.a)(m.total),!O.lt(E)){e.next=17;break}return e.abrupt("return",d("".concat(n.token).concat(c("out"))));case 17:if(j=l.find((function(e){return e.address===r.address})),w=l.find((function(e){return e.address===n.address})),P=[],S=null,"buy"!==m.act){e.next=38;break}S=0,T=Object(k.a)(i).reverse(),A=Object(C.b)(Object(C.l)(1,36)).div(Object(C.a)(m.price)),L=0;case 26:if(!(L<T.length)){e.next=33;break}if(!(Object(C.a)(T[L].price).lte(A)||Number(Object(C.a)(T[L].price).toString())-Number(A.toString())<Math.pow(10,7))){e.next=30;break}return S+=1,e.abrupt("break",33);case 30:L+=1,e.next=26;break;case 33:S>0&&(P=T.slice(0,S)),N={token:w.token,address:w.address,amount:m.total,price:m.price},x={token:j.token,address:j.address,amount:m.amount},e.next=42;break;case 38:for($=0;$<o.length;$+=1)Object(C.a)(o[$].price).lte(Object(C.b)(Object(C.l)(1,36)).div(Object(C.a)(m.price)))&&(S=$+1);S&&(P=o.slice(0,S)),N={token:j.token,address:j.address,amount:m.amount,price:m.price},x={token:w.token,address:w.address,amount:m.total};case 42:if(u.modalActions.updateLoading(!0),u.modalActions.updateMessage(c("gettingTx")),!(P.length>0)){e.next=50;break}return e.next=47,V.a(s.wallet.address,x);case 47:M=e.sent,e.next=51;break;case 50:M=0;case 51:if(W=function(e){var t=a.find((function(e){return e.address===finalConfig.ethAddress})),r=Number(Object(C.l)(Object(C.a)(t.usable).toString(),-18));return N.address===finalConfig.ethAddress&&(r-=Object(C.l)(Object(C.a)(N.amount).toString(),-n.decimal)),!(r<Number(e))},s.observer){e.next=69;break}return e.next=55,V.i(N,x,s.wallet.address,s.key,h);case 55:if(!(F=e.sent)){e.next=64;break}if(u.modalActions.updateLoading(!1),_=F.userAddress?Number(Object(C.l)(F.gasPrice*F.gasLimit,-18))+(P.length+1)*Number(Object(C.l)(15e5,-18))+Number(Object(C.l)(5e4,-18)):Object(C.l)(F.gasPrice*F.gasLimit,-18),W(_)){e.next=61;break}return e.abrupt("return",d("ETH".concat(c("out"))));case 61:this.props.modalControl.open("transaction",{type:m.act,fromToken:N,toToken:x,fromDecimal:F.fromDecimal,toDecimal:F.toDecimal,gas:_,fee:M,exec:function(){q.pending(m.act,F)}}),e.next=67;break;case 64:u.modalActions.updateLoading(!1),d(c("failMessage")),console.warn("Error");case 67:e.next=84;break;case 69:return u.userActions.changeKeep(!0),e.next=72,V.v(N,s.wallet.address);case 72:if(B=e.sent,u.modalActions.updateLoading(!1),D=function(){var e=Object(R.a)(z.a.mark((function e(t){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.x(N,x,s.wallet.address,h);case 2:a=e.sent,t&&(a.skip=!0),q.pending(m.act,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"0x"===B&&(B="0"),!Object(C.a)(B.replace("0x","")).lt(Object(C.a)(N.amount))||B/Math.pow(10,18)===0){e.next=83;break}return e.next=79,V.w(Object(g.a)(Object(g.a)({},N),{},{amount:"0"}));case 79:(I=e.sent)&&this.props.modalControl.open("observerQr",{type:"approveZero",qrcode:I,exec:function(){q.props.modalControl.close(),D()},fromToken:N,message:c("observerWaiting")}),e.next=84;break;case 83:Object(C.a)(B.replace("0x","")).gte(Object(C.a)(N.amount))?D(!0):(this.props.modalControl.close(),D());case 84:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pending",value:function(){var e=Object(R.a)(z.a.mark((function e(t,a){var n,r,c,s,i,o,l,u,d,m,h,b,f,v,g,k;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.from,c=n.to,s=n.t,i=n.user,o=n.createQuery,l=n.toastOpen,u=n.actions,d=n.price,m=n.amount,h=n.handleInput,b=u.userActions,f=b.myBooksAdd,v=b.myTransactionChange,g={no:this.state.tmp,desc:"".concat(c.token,"/").concat(r.token),status:"active",timestamp:s("sending"),displayPrice:d.value,type:t,fill:0,amount:m.value,from:c.token,to:r.token},u.modalActions.updateLoading(!0),u.modalActions.updateMessage(i.observer?s("dataGenerating"):s("success")),!i.observer){e.next=9;break}V.d(a).then((function(e){a.skip&&(e.approve=""),o(t,e.raw,e.approve,a.from,a.data),u.modalActions.updateLoading(!1)})),e.next=14;break;case 9:return this.setState(p()(this.state,{tmp:{$set:this.state.tmp-1}}),(function(){f(g)})),e.next=12,V.B(a);case 12:(k=e.sent)?(u.modalActions.updateLoading(!1),this.props.modalControl.open("receipt",{receipt:k})):(l(s("notSent")),u.modalActions.updateLoading(!1));case 14:h("price",""),h("amount",""),v({price:"",amount:"",able:!1,total:"-",act:t});case 17:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renderButton",value:function(){var e=this.props,t=e.t,a=e.from,n=e.mouseEnterPending,r=e.mouseLeavePending,c=e.myTransaction;return l.a.createElement("div",{className:"submit"},l.a.createElement("button",{className:"buy"===c.act?"green":"red",onClick:this.openLimitPending,onMouseEnter:function(){return n(c.act)},onMouseLeave:function(){return r()},disabled:!c.able},t(c.act)," ",a.token))}},{key:"render",value:function(){var e=this,t=this.props,a=t.from,n=t.to,r=t.t,c=t.myTransaction,s=t.price,i=t.amount;return l.a.createElement("div",{className:"c_limitTransaction"},l.a.createElement("div",{className:"input-field"},l.a.createElement("div",null,r("price")),l.a.createElement("div",{className:s.active?"enter active":"enter","data-input":"price",onClick:this.clickFocus},l.a.createElement("input",{id:"price",type:"text",name:"price",onChange:this.handleInput,value:s.value,ref:function(t){e.price=t}}),l.a.createElement("div",{className:"type"},n.token))),l.a.createElement("div",{className:"input-field"},l.a.createElement("div",null,r("amount")),l.a.createElement("div",{className:i.active?"enter active":"enter","data-input":"amount",onClick:this.clickFocus},l.a.createElement("input",{id:"amount",type:"text",name:"amount",onChange:this.handleInput,value:i.value,ref:function(t){e.amount=t}}),l.a.createElement("div",{className:"type from"},a.token))),l.a.createElement("div",{className:"submit-field"},l.a.createElement("div",{className:"volume"},l.a.createElement("div",null,"TOTAL"),l.a.createElement("div",null,l.a.createElement("div",{className:"total"},"-"!==c.total?Object(C.e)(8,Object(C.l)(Object(C.a)(c.total,16).toString(),-n.decimal)):"-"),l.a.createElement("div",null,n.token))),this.renderButton()))}}]),a}(l.a.Component));X.defaultProps={t:function(){}};var Z=Object(h.b)("account",{wait:!0})(X),J=(a(781),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r.openMarketTrans=r.openMarketTrans.bind(Object(c.a)(r)),r.immTrans=r.immTrans.bind(Object(c.a)(r)),r.enterMarket=r.enterMarket.bind(Object(c.a)(r)),r.clickFocus=r.clickFocus.bind(Object(c.a)(r)),r.timeout=null,r.length=0,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.clickOutside)}},{key:"shouldComponentUpdate",value:function(e,t){return!v()(e,this.props)||!v()(t,this.state)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.clickOutside),this.timeout=null}},{key:"clickFocus",value:function(e){var t=e.currentTarget.dataset.type;this.amount.focus(),this.props.handleFocus(t)}},{key:"enterMarket",value:function(e){var t=this,a=e.target.value;this.props.handleInput("amount",a),clearTimeout(this.timeout),this.timeout=setTimeout((function(){var e,n=t.props,r=n.sellbook,c=n.buybook,s=n.actions,i=n.from,o=n.to,l=n.toastOpen,u=n.t,d=n.myTransaction,m=n.handlePreview,p=n.amount,h=s.userActions.myTransactionChange,b=function(){h({price:"",amount:"",able:!1,act:d.act,total:"-"})};if(a<Math.pow(10,-6))return b(),l("".concat(i.token," ").concat(u("min")).concat(Math.pow(10,-6)));if(a>Math.pow(10,9))return b(),l("".concat(i.token," ").concat(u("max")).concat(Math.pow(10,9)));if("buy"===d.act){var f=Object(k.a)(r).reverse(),v=f.find((function(e){return e.value>=a}));if(v){var g=Object(C.b)(Object(C.l)(1,36)).div(Object(C.a)(v.price)).toString(16),y=Object(C.b)(Object(C.l)(a,i.decimal)).toString(16);e=Object(C.b)(Object(C.l)(Object(C.a)(y).toString(),18)).div(Object(C.a)(g)).toString(16),t.length=f.indexOf(v)+1,h({price:g,amount:y,able:!0,act:d.act,total:e})}else b()}else{var O=c.find((function(e){return e.value>=a}));if(O){var E=Object(C.b)(Object(C.l)(1,36)).div(Object(C.a)(O.price)).toString(16),j=Object(C.b)(Object(C.l)(a,i.decimal)).toString(16);e=Object(C.b)(Object(C.l)(Object(C.a)(j).mul(Object(C.a)(E)).toString(),-18).split(".")[0]).toString(16),t.length=c.indexOf(O)+1,h({price:E,amount:j,able:!0,act:d.act,total:e})}else b()}m(p.value,Object(C.l)(Object(C.a)(e).toString(),-o.decimal))}),500)}},{key:"immTrans",value:function(){var e=Object(R.a)(z.a.mark((function e(t,a){var n,r,c,s,i,o,l,u,d;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.user,c=n.actions,s=n.createQuery,i=n.t,o=n.toastOpen,l=n.handleInput,u=c.userActions.myTransactionChange,c.modalActions.updateLoading(!0),c.modalActions.updateMessage(r.observer?i("dataGenerating"):i("success")),!r.observer){e.next=8;break}V.d(a).then((function(e){c.modalActions.updateLoading(!1),a.skip&&(e.approve=""),s(t,e.raw,e.approve,a.from,a.data)})),e.next=12;break;case 8:return e.next=10,V.B(a);case 10:(d=e.sent)?(this.props.modalControl.open("receipt",{receipt:d}),c.modalActions.updateLoading(!1)):(o(i("notSent")),c.modalActions.updateLoading(!1));case 12:this.length=0,l("amount",""),u({price:"",amount:"",able:!1,total:"-",act:t});case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"openMarketTrans",value:function(){var e=Object(R.a)(z.a.mark((function e(){var t,a,n,r,c,s,i,o,l,u,d,m,p,h,b,f,v,k,y,O,E,j,w,N,x,P,S,T,A,L=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.from,n=t.to,r=t.tokenList,c=t.myTransaction,s=t.account,i=t.t,o=t.user,l=t.actions,u=t.toastOpen,d=t.amount,m="",o.wallet){e.next=4;break}return e.abrupt("return",u("".concat(i("importAlert"))));case 4:if(!(d.value>Math.pow(10,9))){e.next=6;break}return e.abrupt("return",u("".concat(a.token).concat(i("max")).concat(Math.pow(10,9))));case 6:if(!(d.value<Math.pow(10,-2))){e.next=8;break}return e.abrupt("return",u("".concat(a.token).concat(i("min")).concat(Math.pow(10,-2))));case 8:if(!(Object(C.l)(Object(C.a)(c.total).toString(),-n.decimal)>Math.pow(10,9))){e.next=10;break}return e.abrupt("return",u("Total ".concat(n.token).concat(i("max")).concat(Math.pow(10,9))));case 10:if(!(Object(C.l)(Object(C.a)(c.total).toString(),-n.decimal)<Math.pow(10,-2))){e.next=12;break}return e.abrupt("return",u("Total ".concat(n.token).concat(i("min")).concat(Math.pow(10,-2))));case 12:if(b=r.find((function(e){return e.address===a.address})),f=r.find((function(e){return e.address===n.address})),"sell"!==c.act){e.next=24;break}if(v=s.find((function(e){return e.address===a.address})),k=Object(C.a)(v.usable),y=Object(C.b)(Object(C.l)(d.value,a.decimal)),!k.lt(y)){e.next=20;break}return e.abrupt("return",u("".concat(a.token).concat(i("out"))));case 20:p={token:b.token,address:b.address,price:c.price,amount:c.amount},h={token:f.token,address:f.address,amount:c.total},e.next=31;break;case 24:if(O=s.find((function(e){return e.address===n.address})),E=Object(C.a)(O.usable),j=Object(C.a)(c.total),!E.lt(j)){e.next=29;break}return e.abrupt("return",u("".concat(n.token).concat(i("out"))));case 29:p={token:f.token,address:f.address,price:c.price,amount:c.total},h={token:b.token,address:b.address,amount:c.amount};case 31:if(l.modalActions.updateLoading(!0),l.modalActions.updateMessage(i("gettingTx")),w=function(e){var t=s.find((function(e){return e.address===finalConfig.ethAddress})),a=Number(Object(C.l)(Object(C.a)(t.usable).toString(),-18));return p.address===finalConfig.ethAddress&&(a-=Object(C.l)(Object(C.a)(p.amount).toString(),-n.decimal)),!(a<Number(e))},N=0,!(this.length>0)){e.next=39;break}return e.next=38,V.a(o.wallet.address,h);case 38:N=e.sent;case 39:if(o.observer){e.next=56;break}return e.next=42,V.i(p,h,o.wallet.address,o.key,m,!0);case 42:if(!(x=e.sent)){e.next=51;break}if(l.modalActions.updateLoading(!1),P=x.userAddress?x.gasPrice*x.gasLimit/Math.pow(10,18)+(this.length+1)*(15e5/Math.pow(10,18))+5e4/Math.pow(10,18):x.gasPrice*x.gasLimit/Math.pow(10,18),w(P)){e.next=48;break}return e.abrupt("return",u("ETH".concat(i("out"))));case 48:this.props.modalControl.open("transaction",{type:c.act,fromToken:p,toToken:h,gas:P,fee:N,fromDecimal:x.fromDecimal,toDecimal:x.toDecimal,exec:function(){L.immTrans(c.act,x)}}),e.next=54;break;case 51:l.modalActions.updateLoading(!1),u(i("failMessage")),console.warn("Error");case 54:e.next=71;break;case 56:return l.userActions.changeKeep(!0),e.next=59,V.v(p,o.wallet.address);case 59:if(S=e.sent,l.modalActions.updateLoading(!1),T=function(){var e=Object(R.a)(z.a.mark((function e(t){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.x(p,h,o.wallet.address,m,!0);case 2:a=e.sent,t&&(a.skip=!0),L.immTrans(c.act,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"0x"===S&&(S="0"),!Object(C.a)(S.replace("0x","")).lt(Object(C.a)(p.amount))||S/Math.pow(10,18)===0){e.next=70;break}return e.next=66,V.w(Object(g.a)(Object(g.a)({},p),{},{amount:"0"}));case 66:(A=e.sent)&&this.props.modalControl.open("observerQr",{type:"approve",qrcode:A,exec:function(){L.props.modalControl.close(),T()},fromToken:p,message:"\u8acb\u5b8c\u6210\u4ea4\u6613\u518d\u95dc\u9589\u8996\u7a97"}),e.next=71;break;case 70:Object(C.a)(S.replace("0x","")).gte(Object(C.a)(p.amount))?T(!0):(this.props.modalControl.close(),T());case 71:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderButton",value:function(){var e=this.props,t=e.from,a=e.t,n=e.mouseEnterPending,r=e.mouseLeavePending,c=e.myTransaction,s=c.act,i=c.able;return l.a.createElement("div",{className:"submit"},l.a.createElement("button",{className:"buy"===s?"green":"red",onClick:this.openMarketTrans,onMouseEnter:function(){return n(s)},onMouseLeave:function(){return r()},disabled:!i},a(s)," ",t.token))}},{key:"render",value:function(){var e=this,t=this.props,a=t.from,n=t.to,r=t.t,c=t.myTransaction,s=t.amount;return l.a.createElement("div",{className:"c_marketTransaction"},l.a.createElement("div",{className:"input-field"},l.a.createElement("div",null,r("amount")),l.a.createElement("div",{className:s.active?"enter active":"enter","data-type":"amount",onClick:this.clickFocus},l.a.createElement("input",{type:"text",onChange:this.enterMarket,value:s.value,ref:function(t){e.amount=t}}),l.a.createElement("div",{className:"type from"},a.token))),l.a.createElement("div",{className:"submit-field"},l.a.createElement("div",{className:"volume"},l.a.createElement("div",null,"TOTAL"),l.a.createElement("div",null,l.a.createElement("div",{className:"total"},"\u2248 ","-"===c.total?"-":Object(C.e)(8,Object(C.l)(Object(C.a)(c.total).toString(),-n.decimal))),l.a.createElement("div",null,n.token))),this.renderButton()))}}]),a}(l.a.Component));J.defaultProps={t:function(){}};var Y=Object(h.b)("account",{wait:!0})(J),ee=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={pendingType:1,preview:{add:"",less:""},toggle:!1,calc:{add:"",less:""},price:{active:!1,value:""},amount:{active:!1,value:""}},r.btn="",r.selectPending=r.selectPending.bind(Object(c.a)(r)),r.mouseEnterPending=r.mouseEnterPending.bind(Object(c.a)(r)),r.mouseLeavePending=r.mouseLeavePending.bind(Object(c.a)(r)),r.createQuery=r.createQuery.bind(Object(c.a)(r)),r.toggleSelect=r.toggleSelect.bind(Object(c.a)(r)),r.changeSelect=r.changeSelect.bind(Object(c.a)(r)),r.clickOutside=r.clickOutside.bind(Object(c.a)(r)),r.handlePreview=r.handlePreview.bind(Object(c.a)(r)),r.copyAddress=r.copyAddress.bind(Object(c.a)(r)),r.preview=r.preview.bind(Object(c.a)(r)),r.handleInput=r.handleInput.bind(Object(c.a)(r)),r.handleFocus=r.handleFocus.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.clickOutside),this.props.onRef(this)}},{key:"shouldComponentUpdate",value:function(e,t){return!v()(e,this.props)||!v()(t,this.state)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.clickOutside),this.props.onRef(null)}},{key:"changeInput",value:function(e,t){this.setState(p()(this.state,{price:{value:{$set:e}},amount:{value:{$set:null===t?this.state.amount.value:""}}}))}},{key:"clickOutside",value:function(e){var t=document.querySelector(".c_account .toggle"),a=document.querySelector(".c_account .select");t&&!a.contains(e.target)&&this.setState(p()(this.state,{toggle:{$set:!1}}));var n=document.querySelector(".enter.active");n&&!n.contains(e.target)&&this.setState(p()(this.state,{price:{active:{$set:!1}},amount:{active:{$set:!1}}}))}},{key:"changeSelect",value:function(e){e.stopPropagation();var t=e.target.dataset.type;if(!1===this.state.toggle)this.setState(p()(this.state,{toggle:{$set:!0}}));else{var a=this.props,n=a.myTransaction,r=a.actions,c=a.from,s=a.to,i=this.state.pendingType;if(1===i&&n.act!==t&&n.price){var o=this.state.price;r.userActions.myTransactionUpdate({type:"price",value:"sell"===t?Object(C.b)(Object(C.l)(o.value,18+s.decimal-c.decimal)).toString(16):Object(C.b)(Object(C.l)(Object(C.b)(Object(C.l)(1,36)).div(Object(C.b)(Object(C.l)(o.value,18))).toString(),c.decimal-s.decimal)).toString(16)})}else 1!==i&&r.userActions.myTransactionChange({price:"",amount:"",total:"-",able:!1,act:t});this.setState(p()(this.state,{toggle:{$set:!1},amount:{value:{$set:1!==i?"":this.state.amount.value}}})),r.userActions.myTransactionUpdate({type:"act",value:t})}}},{key:"handleFocus",value:function(e){this.setState(p()(this.state,{price:{active:{$set:"price"===e}},amount:{active:{$set:"price"!==e}}}))}},{key:"handleInput",value:function(e,t){t.split(".")[1]&&t.split(".")[1].length>8?Number(t)&&this.setState(p()(this.state,Object(H.a)({},e,{value:{$set:0===Number(t)?"":Number(t).toFixed(9).substr(0,t.length-1)}}))):this.setState(p()(this.state,Object(H.a)({},e,{value:{$set:t}})))}},{key:"copyAddress",value:function(){document.querySelector(".wallet-address textarea").select(),document.execCommand("copy"),this.props.toastOpen(this.props.t("copied"))}},{key:"createQuery",value:function(e,t,a,n,r){var c=this.props,s=c.modalControl,i=c.actions,o=c.t;if(a){s.open("observerQr",{type:"approve",qrcode:a,exec:function(){setTimeout((function(){s.close(),s.open("observerQr",{type:"sign",qrcode:t,fromToken:n,message:o("observerWaiting"),data:r})}),100)},fromToken:n,message:o("observerWaiting"),data:r}),i.modalActions.updateLoading(!1)}else s.open("observerQr",{type:"sign",qrcode:t,fromToken:n,message:o("observerWaiting"),data:r}),i.modalActions.updateLoading(!1)}},{key:"mouseEnterPending",value:function(e){var t=this.props,a=t.from,n=t.to,r=t.myTransaction.able;this.btn=e,"sell"===e&&r?this.setState(p()(this.state,{preview:{add:{$set:n.token},less:{$set:a.token}}})):"buy"===e&&r&&this.setState(p()(this.state,{preview:{add:{$set:a.token},less:{$set:n.token}}}))}},{key:"mouseLeavePending",value:function(){this.setState(p()(this.state,{preview:{add:{$set:""},less:{$set:""}}})),this.btn=""}},{key:"handlePreview",value:function(e,t){this.setState(p()(this.state,{calc:{add:{$set:e},less:{$set:t}}}))}},{key:"logout",value:function(){window.location.reload()}},{key:"preview",value:function(e){var t="",a="",n=this.state,r=n.preview,c=n.pendingType,s=n.calc;if(e.token===r.add){t="add";try{a=1===c?"buy"===this.btn?s.add:s.less:1!==c&&"sell"===this.btn?s.less:s.add,a="+".concat(Object(C.e)(7,Number(a)))}catch(i){t="",a=""}}else if(e.token===r.less){t="less";try{a="buy"===this.btn?s.less:s.add,a="-".concat(Object(C.e)(7,Number(a)))}catch(i){t="",a=""}}return{style:t,value:a}}},{key:"selectPending",value:function(e){var t=this.props,a=t.actions,n=t.myTransaction,r=a.userActions.myTransactionChange;this.setState(p()(this.state,{pendingType:{$set:Number(e.target.dataset.type)},price:{value:{$set:""}},amount:{value:{$set:""}}})),r({amount:"",total:"-",able:!1,price:"",act:n.act})}},{key:"toggleSelect",value:function(){this.setState(p()(this.state,{toggle:{$set:!this.state.toggle}}))}},{key:"renderAccount",value:function(){var e=this.props,t=e.user,a=e.actions,n=e.tokenList,r=e.t,c=e.loading,s=e.modalControl;if(t.wallet){var i="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t.wallet)));return l.a.createElement("div",{className:"table"},l.a.createElement("div",{className:"t-header"},l.a.createElement("span",null,r("balance"))),this.renderTable(),l.a.createElement("div",{className:"wallet-address"},l.a.createElement("div",{className:"address"},l.a.createElement("div",{className:"wallet-title"},r("yourWallet")),l.a.createElement("div",null,l.a.createElement("textarea",{value:t.wallet?"0x".concat(t.wallet.address.replace("0x","")):"",readOnly:!0}),l.a.createElement("img",{src:"/img/icon/ic-copy.svg",alt:"copy",onClick:this.copyAddress}))),t.observer?"":l.a.createElement("div",{className:"wallet-export"},l.a.createElement("a",{className:"button",href:i,download:"keyStore.json",target:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?"_blank":""},l.a.createElement("span",null,r("downloadWallet"))))))}return l.a.createElement(G.a,{wallet:t.wallet||{},actions:a,tokenList:n,loading:c,modalControl:s,exportLink:this.exportLink})}},{key:"renderTable",value:function(){var e,t=this,a=this.props,n=a.from,r=a.to,c=a.account,s=a.tokenList;if(c&&c.length>0){e=c.map((function(e,t){if(e.address!==n.address&&e.address!==r.address){var a=s.find((function(t){return t.address===e.address})).decimal,c=Object(C.l)(Object(C.a)(e.usable).toString(),-a);return l.a.createElement("div",{key:e.index||t},l.a.createElement("span",null,e.token),l.a.createElement("span",null,c),l.a.createElement("span",null))}return null}));var i=function(e){var a=c.find((function(t){return t.address===e})),n=t.preview(a),i=s.find((function(t){return t.address===e})).decimal,o=Object(C.l)(Object(C.a)(a.usable).toString(),-i);return l.a.createElement("div",{key:a.address,className:e===r.address?"active":""},l.a.createElement("span",null,a.token),l.a.createElement("span",null,o),l.a.createElement("span",{className:n.style},n.value))};return l.a.createElement("div",{className:"t-body"},i(r.address),i(n.address),e)}return null}},{key:"renderToggle",value:function(){var e=this.props,t=e.from,a=e.t;return l.a.createElement("div",{className:this.state.toggle?"toggle":"toggle close"},l.a.createElement("div",{"data-type":"buy",onClick:this.changeSelect},a("buy"),t.token),l.a.createElement("div",{"data-type":"sell",onClick:this.changeSelect},a("sell"),t.token))}},{key:"renderTransaction",value:function(){var e=this,t=this.props,a=t.from,n=t.to,r=t.myTransaction,c=t.actions,s=t.user,i=t.account,o=t.tokenList,u=t.sellbook,d=t.buybook,m=t.modalControl,p=t.toastOpen,h=this.state,b=h.price,f=h.amount;return 1===h.pendingType?l.a.createElement(Z,{from:a,to:n,myTransaction:r,user:s,account:i,tokenList:o,buybook:d,sellbook:u,actions:c,mouseEnterPending:this.mouseEnterPending,mouseLeavePending:this.mouseLeavePending,createQuery:this.createQuery,handlePreview:this.handlePreview,modalControl:m,toastOpen:p,price:b,amount:f,handleInput:this.handleInput,handleFocus:function(t){e.handleFocus(t)}}):l.a.createElement(Y,{from:a,to:n,myTransaction:r,user:s,account:i,tokenList:o,buybook:d,sellbook:u,actions:c,mouseEnterPending:this.mouseEnterPending,mouseLeavePending:this.mouseLeavePending,createQuery:this.createQuery,handlePreview:this.handlePreview,modalControl:m,toastOpen:p,amount:f,handleInput:this.handleInput,handleFocus:function(t){e.handleFocus(t)}})}},{key:"render",value:function(){var e=this.state.pendingType,t=this.props,a=t.t,n=t.to,r=t.from,c=t.user,s=t.myTransaction;return l.a.createElement("div",{className:c.wallet?"c_account login":"c_account"},l.a.createElement("div",{className:"title"},a("transaction"),c.wallet?l.a.createElement("div",{className:"logout"},l.a.createElement("span",{onClick:this.logout},a("logoutWallet"))):null),this.renderAccount(),l.a.createElement("div",{className:"buySell"},l.a.createElement("div",{className:"pending-type"},l.a.createElement("a",{className:1===e?"active":"","data-type":"1",onClick:this.selectPending},a("pendingTrade")),l.a.createElement("a",{className:2===e?"active":"","data-type":"2",onClick:this.selectPending},a("instantTrade"))),l.a.createElement("div",{className:"buy-sell"},l.a.createElement("div",{className:"select",onClick:this.toggleSelect},l.a.createElement("span",null,"buy"===s.act?"".concat(a("buy")).concat(r.token):"".concat(a("sell")).concat(r.token)),l.a.createElement("img",{src:"/img/icon/ic-dropdown-p.svg",alt:"dropdown"}),this.renderToggle()),l.a.createElement("div",{className:"store"},l.a.createElement("img",{src:"/img/icon/ic-wallet.svg",alt:"wallet"}),l.a.createElement("span",null,l.a.createElement("span",null,"-"),"buy"===s.act?n.token:r.token))),l.a.createElement("div",null,this.renderTransaction())))}}]),a}(l.a.Component);ee.defaultProps={t:function(){}};var te=Object(h.b)("account",{wait:!0})(ee),ae=(a(782),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={toggle:!0},r}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return!v()(e,this.props)||!v()(t,this.state)}},{key:"renderTable",value:function(){var e=this.props,t=e.transaction,a=e.t,n=e.from,r=e.to,c=t.map((function(e,t){return l.a.createElement("div",{key:e.index||t,className:"info"},l.a.createElement("div",{className:"buy"===e.type?"green":"red"},"buy"===e.type?a("table.buy"):a("table.sell")),l.a.createElement("div",{className:"amount"},Object(C.e)(8,e.displayPrice)),l.a.createElement("div",null,Object(C.e)(7,e.amount)),l.a.createElement("div",{className:"time"},Object(C.f)(e.timestamp,"time")))}));return l.a.createElement("div",null,l.a.createElement("div",{className:"title"},a("table.recentTranssaction")),l.a.createElement("div",{className:this.state.toggle?"table":"table close"},l.a.createElement("div",{className:"t-header"},l.a.createElement("span",null),l.a.createElement("span",null,a("table.price"),"(",r.token,")"),l.a.createElement("span",null,a("table.volume"),"(",n.token,")"),l.a.createElement("span",null,a("table.time"))),l.a.createElement("div",{className:"t-body"},c)))}},{key:"render",value:function(){return l.a.createElement("div",{className:"c_recentTransaction"},this.renderTable())}}]),a}(l.a.Component));ae.defaultProps={t:function(){}};var ne=Object(h.b)()(ae),re=a(30),ce=a(646),se=(a(783),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={toggle:!1,pendingFilter:8,sell:e.sell,buy:e.buy},r.toggleSelect=r.toggleSelect.bind(Object(c.a)(r)),r.clickOutside=r.clickOutside.bind(Object(c.a)(r)),r.fliter=[8,7,6,5],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.clickOutside)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=[],n=[];e.sell.forEach((function(e){a.push(Object(g.a)(Object(g.a)({},e),{},{displayPrice:Number(e.displayPrice).toFixed(t.state.pendingFilter)}))})),e.buy.forEach((function(e){n.push(Object(g.a)(Object(g.a)({},e),{},{displayPrice:Number(e.displayPrice).toFixed(t.state.pendingFilter)}))})),this.setState(p()(this.state,{sell:{$set:a},buy:{$set:n}}))}},{key:"shouldComponentUpdate",value:function(e,t){return!(v()(t,this.state)&&v()(e.from,this.props.from)&&v()(e.to,this.props.to)&&v()(e.buy,this.props.buy)&&v()(e.sell,this.props.sell)&&v()(e.myTransaction,this.props.myTransaction)&&v()(e.t,this.props.t))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.clickOutside)}},{key:"clickOutside",value:function(e){!0===this.state.toggle&&(this.select.contains(e.target)||this.setState(p()(this.state,{toggle:{$set:!1}})))}},{key:"changeSelect",value:function(e){var t=[],a=[];this.props.sell.forEach((function(a){t.push(Object(g.a)(Object(g.a)({},a),{},{displayPrice:Number(a.displayPrice).toFixed(e)}))})),this.props.buy.forEach((function(t){a.push(Object(g.a)(Object(g.a)({},t),{},{displayPrice:Number(t.displayPrice).toFixed(e)}))})),this.setState(p()(this.state,{sell:{$set:t},buy:{$set:a},pendingFilter:{$set:e},toggle:{$set:!1}}))}},{key:"toggleSelect",value:function(){this.setState(p()(this.state,{toggle:{$set:!this.state.toggle}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.from,r=t.to,c=t.actions,s=t.myTransaction,i=t.changePrice,o=t.toastOpen,u=this.state,d=u.pendingFilter,m=u.toggle,p=u.sell,h=u.buy;return p.forEach((function(e){"number"===typeof e.displayPrice&&(e.displayPrice=e.displayPrice.toFixed(d))})),h.forEach((function(e){"number"===typeof e.displayPrice&&(e.displayPrice=e.displayPrice.toFixed(d))})),l.a.createElement("div",{className:"c_orders"},l.a.createElement("div",{className:"title"},a("table.pendingOrders")),l.a.createElement("div",{className:"books-header"},l.a.createElement("div",null,a("table.price"),"(",r.token,")"),l.a.createElement("div",null,a("table.amount"),"(",n.token,")"),l.a.createElement("div",null,a("table.total"),"(",n.token,")")),l.a.createElement(ce.a,{book:p,type:"sell",actions:c,myTransaction:s,from:n,to:r,changePrice:i,toastOpen:o}),l.a.createElement("div",{className:"divid"}),l.a.createElement(ce.a,{book:h,type:"buy",actions:c,myTransaction:s,from:n,to:r,changePrice:i,toastOpen:o}),l.a.createElement("div",{className:"filter"},l.a.createElement("div",{className:"choose",onClick:this.toggleSelect,ref:function(t){e.select=t}},l.a.createElement("span",null,a("table.decimal",{des:d})),l.a.createElement("img",{src:"/img/icon/ic-dropdown-p.svg",alt:"dropdown"}),l.a.createElement("div",{className:m?"toggle":"toggle close"},l.a.createElement("div",{onClick:function(t){t.stopPropagation(),e.changeSelect(e.fliter[0])}},this.fliter[0]),l.a.createElement("div",{onClick:function(t){t.stopPropagation(),e.changeSelect(e.fliter[1])}},this.fliter[1]),l.a.createElement("div",{onClick:function(t){t.stopPropagation(),e.changeSelect(e.fliter[2])}},this.fliter[2]),l.a.createElement("div",{onClick:function(t){t.stopPropagation(),e.changeSelect(e.fliter[3])}},this.fliter[3]))),l.a.createElement("span",{className:"more"},l.a.createElement(re.b,{to:"/order"},a("table.more")))))}}]),a}(l.a.Component));se.defaultProps={t:function(){},changePrice:function(){}};var ie=Object(h.b)()(se),oe=(a(784),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={toggleOrder:""},r.closeOrder=r.closeOrder.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"closeOrder",value:function(){var e=Object(R.a)(z.a.mark((function e(t){var a,n,r,c,s,i,o,l,u,d,m,p,h,b,f,v=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.myBooks,r=a.user,c=a.t,s=a.modalControl,i=a.toastOpen,o=a.from,l=a.to,u=a.modalActions,d=a.actions,!(t.no<0)){e.next=3;break}return e.abrupt("return",i(c("table.cancelAlert")));case 3:return m=n.indexOf(n.find((function(e){return e.no===t.no}))),p={address:o.token===t.from?o.address:l.address,price:t.price,amount:t.amount,decimal:o.address===t.from?o.deciaml:l.decimal},h={address:o.token===t.to?o.address:l.address},e.next=8,V.h(p,h,r.wallet.address,r.key,"");case 8:b=e.sent,f=function(){var e=Object(R.a)(z.a.mark((function e(){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.updateLoading(!0),u.updateMessage(c("table.canceling")),!r.observer){e.next=10;break}return e.next=5,V.c(b);case 5:a=e.sent,s.open("observerQr",{type:"cancel",qrcode:a}),u.updateLoading(!1),e.next=15;break;case 10:return d.userActions.myBooksChange(t.no),e.next=13,V.b(b);case 13:(n=e.sent)&&(v.props.cancelPending(m),u.updateLoading(!1),s.open("receipt",{receipt:n}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.open("cancelOrder",{desc:t.desc,price:t.displayPrice,fill:t.fill,amount:t.displayAmount,type:t.type,exec:f,gas:Object(C.l)(b.gasLimit*b.gasPrice,-18)});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleOrder",value:function(e){""!==e?this.setState(p()(this.state,{toggleOrder:{$set:"close"}})):this.setState(p()(this.state,{toggleOrder:{$set:""}}))}},{key:"renderThead",value:function(){var e=this.props.t;return""===this.state.toggleOrder?l.a.createElement("div",{className:"t-header"},l.a.createElement("div",null,e("table.desc")),l.a.createElement("div",null,e("table.deal"),"/",e("table.amount")),l.a.createElement("div",null,e("table.ratio"))):l.a.createElement("div",{className:"t-header"},l.a.createElement("div",null,e("table.desc")),l.a.createElement("div",null,e("table.amount")),l.a.createElement("div",null,e("table.ratio")))}},{key:"renderBody",value:function(){var e=this,t=this.props,a=t.myBooks,n=t.t,r=t.from;if(""===this.state.toggleOrder){var c=a.map((function(t){return l.a.createElement("div",{className:t.cancel?"mt-list block":"mt-list",key:t.no},l.a.createElement("div",null,l.a.createElement("div",{className:"info"},l.a.createElement("div",{className:"desc"},l.a.createElement("div",null,l.a.createElement("span",{className:"buy"===t.type?"buy":"sell"},/buy/.test(t.type)?"B":"S"),l.a.createElement("span",null,l.a.createElement("span",{className:"from"},t.desc.split("/")[0]),l.a.createElement("span",{className:"base"},"/",t.desc.split("/")[1]))),l.a.createElement("div",{className:"time"},"number"===typeof t.timestamp?Object(C.f)(t.timestamp,"date"):t.timestamp)),l.a.createElement("div",{className:"item"},l.a.createElement("div",null,Object(C.e)(8,Object(C.l)(Object(C.a)(t.fill).toString(),-r.decimal))),l.a.createElement("div",null,Object(C.e)(8,t.displayAmount))),l.a.createElement("div",{className:"price"},Object(C.e)(6,t.displayPrice)),l.a.createElement("div",{className:"cancel"},l.a.createElement("img",{src:"/img/icon/ic-del.svg",alt:"cancel",onClick:function(){e.closeOrder(t)}})))))}));return 0===c.length?l.a.createElement("div",{className:"no-result",key:"1"},n("table.noHistory")):c}var s=this.props.myHistory.map((function(e,t){return"take"===e.type?null:l.a.createElement("a",{href:"https://etherscan.io/tx/0x".concat(e.no.split("0x")[2]),target:"_blank",key:e.hash||t},l.a.createElement("div",{className:/c/.test(e.type)?"mt-list canceled":"mt-list"},l.a.createElement("div",null,l.a.createElement("div",{className:"info"},l.a.createElement("div",{className:"desc"},l.a.createElement("div",null,l.a.createElement("span",{className:function(e){switch(e){case"cbuy":return"buy";case"csell":return"sell";case"cancel":return"cancel";case"tbuy":return"buy";case"tsell":return"sell";default:return"trade"}}(e.type)},/buy/.test(e.type)?"B":"S"),l.a.createElement("span",null,l.a.createElement("span",{className:"from"}," ",e.desc.split("/")[0]),l.a.createElement("span",{className:"base"},"/",e.desc.split("/")[1]))),l.a.createElement("div",{className:"time"},"number"===typeof e.timestamp?Object(C.f)(e.timestamp,"date"):e.timestamp)),l.a.createElement("div",{className:"item"},l.a.createElement("div",null,Object(C.e)(8,e.amount))),l.a.createElement("div",{className:"price"},Object(C.e)(10,e.displayPrice))))))}));return 0===s.length?l.a.createElement("div",{className:"no-result",key:"1"},n("table.noHistory")):s}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.myBooks,r=t.myHistory;return l.a.createElement("div",{className:"c_myTransaction"},l.a.createElement("div",{className:"title"},a("table.pendingOrder")),l.a.createElement("div",{className:"order"},l.a.createElement("div",{className:""===this.state.toggleOrder?"active":"",onClick:function(){return e.toggleOrder("")}},a("table.pendingOrder"),l.a.createElement("span",{className:"volume"},n.length)),l.a.createElement("div",{className:""!==this.state.toggleOrder?"active":"",onClick:function(){return e.toggleOrder("close")}},a("table.closed"),l.a.createElement("span",{className:"volume"},r.filter((function(e){return"take"!==e.type})).length))),l.a.createElement("div",{className:"table"},this.renderThead(),l.a.createElement("div",{className:"t-body"},this.renderBody())))}}]),a}(l.a.Component));oe.defaultProps={t:function(){}};var le=Object(h.b)()(oe),ue=a(595),de=a(609),me=a.n(de),pe=(a(785),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.t;return l.a.createElement("div",{className:"c_tideWallet"},l.a.createElement("div",{className:"title"},l.a.createElement("img",{src:"/img/logo-white-notext.svg",alt:"TW"}),l.a.createElement("p",null,"Tide",l.a.createElement("span",null,"Wallet")),l.a.createElement("p",null,e("tideWallet.slogan"))),l.a.createElement("div",null,l.a.createElement("div",{className:"store"},l.a.createElement("div",{className:"qrcode"},l.a.createElement(me.a,{value:finalConfig.tideWalletiOS,size:64})),l.a.createElement("p",null,"iOS")),l.a.createElement("div",{className:"store"},l.a.createElement("div",{className:"qrcode"},l.a.createElement(me.a,{value:finalConfig.tideWalletAndroid,size:64})),l.a.createElement("p",null,"Android"))))}}]),a}(l.a.Component));pe.defaultProps={t:function(){}};var he=Object(h.b)()(pe),be=a(605),fe=a(621),ve=(a(649),function(e){var t=e.t;return l.a.createElement("nav",{className:"co_tab"},l.a.createElement("div",{className:"button",onClick:function(){e.switch(1)}},l.a.createElement("span",null,t("header.chart"))),l.a.createElement("div",{className:"button",onClick:function(){e.switch(2)}},l.a.createElement("span",null,t("header.transaction"))),l.a.createElement("div",{className:"button",onClick:function(){e.switch(3)}},l.a.createElement("span",null,t("table.order"))))});ve.defaultProps={t:function(){}};var ge=Object(h.b)()(ve),ke=a(264),ye=(a(786),function(e){var t=e.t;return l.a.createElement("div",{className:"c_mortgageLink"},l.a.createElement("h3",null,l.a.createElement("p",null,t("mortgageP1")),l.a.createElement("p",null,t("mortgageP2"))),l.a.createElement(re.b,{to:"/mortgage"},l.a.createElement("p",null,"XPA.Exchange ",t("header.mortgage")),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})))});ye.defaultProps={t:function(){}};var Oe=Object(h.b)()(ye),Ee=a(64),je=a(51),we=a(139),Ne=a(640),xe=a(619);a(787);var Ce=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={user:{},nav:1},e.cancelPending=e.cancelPending.bind(Object(c.a)(e)),e.select=e.select.bind(Object(c.a)(e)),e.changeNav=e.changeNav.bind(Object(c.a)(e)),e.modalControl={open:e.modalOpen,close:e.modalClose},e}return Object(r.a)(a,[{key:"select",value:function(e){var t=this.props,a=t.from,n=t.to,r=t.tokenList,c=t.tradeList,s=t.user,i=t.actions,o=t.myTransaction,l=a,u=n;if(e){var d=e.type,m=e.baseAddress,p=e.id,h=e.decimal,b=c[d].find((function(e){return e.id===p})).address,f=r.find((function(e){return e.address===b}));u={token:d,address:m,decimal:h},l={token:f.token,address:f.address,decimal:f.decimal}}i.bookActions.changeFrom(l),i.bookActions.changeTo(u),i.modalActions.updateLoading(!0),this.props.actions.bookActions.bookGet$(),window.dbObj.ref("priceBooks").once("value",(function(e){i.bookActions.recentTransactionGet$(Object.values(e.val()))})),s.wallet&&window.dbObj.ref("operatorBooks").orderByChild("user").equalTo("0x".concat(s.wallet.address)).once("value",(function(e){je.historyGet$(Object.values(e.val()||[]))})),je.myTransactionChange({price:"",amount:"",able:!1,total:"-",act:o.act}),this.child.changeInput("","")}},{key:"changeNav",value:function(e){this.setState(p()(this.state,{nav:{$set:e}}))}},{key:"cancelPending",value:function(e){var t=this.props,a=t.t,n=t.actions,r=t.myBooks;if(r[e])return r[e].no<0?this.toastOpen(a("table.cancelAlert")):void n.userActions.myBooksCancel(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.from,n=t.to,r=t.sell,c=t.buy,s=t.account,i=t.actions,o=t.myBooks,u=t.user,d=t.myTransaction,m=t.tokenList,p=t.tradeList,h=t.transaction,f=t.kData,v=t.loading,g=t.myHistory,k=this.state.nav;return l.a.createElement(fe.a,{actions:this.props.actions,loading:this.props.loading,tokenList:this.props.tokenList,keep:this.props.keep,message:this.props.message,user:u},(function(t,y){return l.a.createElement("div",{className:"co_index"},l.a.createElement(b.a,{from:a,to:n,dash:!0,tradeList:p,actions:i,tokenList:m,select:e.select,myTransaction:d}),l.a.createElement("main",null,l.a.createElement(ke.a,{tradeList:p,select:e.select,actions:i,tokenList:m}),l.a.createElement(ge,{switch:function(t){e.changeNav(t)}}),l.a.createElement("div",{className:2===k?"sidebar rwd-show":"sidebar"},l.a.createElement(te,{account:s,from:a,to:n,sellbook:r,buybook:c,tokenList:m,myTransaction:d,actions:i,user:u,loading:v,modalControl:t,toastOpen:y,onRef:function(t){e.child=t}}),l.a.createElement(le,{myBooks:o,cancelPending:e.cancelPending,user:u,tokenList:m,from:a,to:n,myHistory:g,modalControl:t,toastOpen:y,modalActions:i.modalActions,actions:i}),l.a.createElement(he,null)),l.a.createElement("div",{className:k>0?"content rwd-show":"content"},l.a.createElement("div",{className:1===k?"chart rwd-show":"chart"},l.a.createElement(U,{sell:r,buy:c,data:f,from:a,to:n,tokenList:m,actions:i})),l.a.createElement("div",{className:3===k?"transaction rwd-show":"transaction"},l.a.createElement("section",{className:2===k?"rwd-show":""},l.a.createElement(ie,{from:a,to:n,sell:r,buy:c,actions:i,myTransaction:d,toastOpen:y,changePrice:function(t){e.child.changeInput(t,null)}})),l.a.createElement("section",{className:3===k?"rwd-show":""},l.a.createElement(ne,{transaction:h,from:a,to:n}))),l.a.createElement("div",{className:"transaction"},l.a.createElement("section",null,l.a.createElement(Oe,null)),l.a.createElement("section",null)))),l.a.createElement(ue.a,null))}))}}]),a}(l.a.Component);Ce.defaultProps={t:function(){}};t.default=Object(d.b)((function(e){return{from:e.book.from,to:e.book.to,sell:e.book.sell,buy:e.book.buy,tokenList:e.book.tokenList,summary:e.book.summary,tradeList:e.book.tradeList,transaction:e.book.transaction,kData:e.book.kLine,myBooks:e.user.myBooks,account:e.user.account,user:e.user.user,myTransaction:e.user.myTransaction,keep:e.user.keep,loading:e.modal.loading,message:e.modal.message,news:e.news,myHistory:e.user.myHistory}}),(function(e){return{actions:{bookActions:Object(u.b)(Ee,e),userActions:Object(u.b)(je,e),modalActions:Object(u.b)(we,e),newsActions:Object(u.b)(Ne,e),mortgageActions:Object(u.b)(xe,e)}}}))(Object(be.a)(Object(h.b)()(Ce)))}}]);
//# sourceMappingURL=8.d607334e.chunk.js.map