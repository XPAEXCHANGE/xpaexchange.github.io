(this["webpackJsonpxpa-exchange"]=this["webpackJsonpxpa-exchange"]||[]).push([[4],{120:function(t,e,n){"use strict";var r=n(180),a=n(273),c=n(274),o={order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"],cookieMinutes:10,cookieDomain:"myDomain",htmlTag:document.documentElement},u=new c.a(null,o);r.a.use(a.a).use(u).init({whitelist:["en-us","zh-tw","zh-cn","ko-kr","ja-jp"],fallbackLng:"en-us",ns:["common"],defaultNS:"common",debug:!1,interpolation:{escapeValue:!1},load:"currentOnly",lowerCaseLng:!0,backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{lookupLocalStorage:"i18nextLng"}}),e.a=r.a},139:function(t,e,n){"use strict";n.r(e),n.d(e,"updateLoading",(function(){return a})),n.d(e,"updateMessage",(function(){return c}));var r=n(83);function a(t){return{type:r.a,data:t}}function c(t){return{type:r.b,data:t}}},16:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return i})),n.d(e,"i",(function(){return s})),n.d(e,"n",(function(){return l})),n.d(e,"o",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"f",(function(){return b})),n.d(e,"c",(function(){return g}));var r="ACCOUNT_GET$",a="ACCOUNT_UPDATE",c="MYBOOKS_GET$",o="MYBOOKS_UPDATE",u="MYBOOKS_ADD",i="MYBOOKS_CANCEL",s="MYBOOKS_CHANGE",l="USER_GET$",d="USER_UPDATE",f="HISTORY_GET$",m="HISTORY_UPDATE",p="MYTRANSACTION_CHANGE",h="MYTRANSACTION_UPDATE",b="KEEP",g="DOWNLOADED"},17:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"m",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"l",(function(){return u})),n.d(e,"i",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"n",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return p})),n.d(e,"k",(function(){return h})),n.d(e,"c",(function(){return b}));var r="FROM_CHANGE",a="TO_CHANGE",c="BOOK_GET$",o="BOOK_UPDATE",u="TOKENLIST_GET",i="SUMMARY_GET$",s="SUMMARY_UPDATE",l="TRADELIST_GET",d="RECENTTRANSACTION_GET$",f="RECENTTRANSACTION_UPDATE",m="KLINE_GET$",p="KLINE_UPDATE",h="TIMEUINT_CHANGE",b="FILLBOOK_GET$"},176:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=[{type:"\u7e41\u9ad4\u4e2d\u6587",name:"zh-tw"},{type:"\u7b80\u4f53\u4e2d\u6587",name:"zh-cn"},{type:"English",name:"en-us"},{type:"\ud55c\uad6d\uc5b4",name:"ko-kr"},{type:"\u65e5\u672c\u8a9e",name:"ja-jp"}]},181:function(t,e,n){"use strict";n.d(e,"y",(function(){return w})),n.d(e,"A",(function(){return x})),n.d(e,"s",(function(){return B})),n.d(e,"a",(function(){return I})),n.d(e,"i",(function(){return R})),n.d(e,"v",(function(){return D})),n.d(e,"w",(function(){return H})),n.d(e,"x",(function(){return F})),n.d(e,"B",(function(){return J})),n.d(e,"d",(function(){return K})),n.d(e,"h",(function(){return q})),n.d(e,"b",(function(){return Y})),n.d(e,"c",(function(){return V})),n.d(e,"z",(function(){return z})),n.d(e,"q",(function(){return W})),n.d(e,"o",(function(){return Z})),n.d(e,"r",(function(){return et})),n.d(e,"m",(function(){return rt})),n.d(e,"p",(function(){return ct})),n.d(e,"n",(function(){return ot})),n.d(e,"l",(function(){return it})),n.d(e,"j",(function(){return mt})),n.d(e,"u",(function(){return pt})),n.d(e,"g",(function(){return ht})),n.d(e,"e",(function(){return gt})),n.d(e,"k",(function(){return vt})),n.d(e,"f",(function(){return kt})),n.d(e,"t",(function(){return jt}));var r=n(18),a=n.n(r),c=n(39),o=n(50),u=n(53),i=n.n(u),s=n(3),l=n(62),d=finalConfig.xpaExchange,f=finalConfig.serverUrl,m="0xa8b8057f02e1d21ccf5707a1d18747a3976c119a",p=finalConfig.ethAddress,h=finalConfig.XPAAsset,b=finalConfig.XPA,g=document.createElement("a");g.href=f;var v="0x02540be400",O=Object(o.a)(Object(o.a)({},finalConfig.assetToken),{},{XPA:b}),k=new i.a.providers.HttpProvider(f),j=!1,y=new i.a(k);l.a.init(y,d);var w=function(t){y.eth.getAccounts((function(e,n){if("function"===typeof t&&n[0]){if(y.eth.defaultAccount=n[0],0===n.length)return window.location.reload();t(n[0].replace("0x",""))}}))},x=function(t){window.ethereum.removeAllListeners(),window.ethereum.on("accountsChanged",(function(e){"function"===typeof t&&e.length>0&&t(e[0].replace("0x",""))})),window.ethereum&&(window.web3=new i.a(window.ethereum),window.ethereum.enable(),1)&&(y=window.web3,j=!0)},E=function(){j||(Date.now(),k.headers=[{name:"hashcash",value:echashcash(g.pathname)}],y.setProvider(k))},A=function(t){return i.a.utils.sha3(t)};function N(t,e){var n=t;return t.length<e&&(n=new Array(e-t.length).fill(0).join("")+n),n}function T(t,e){var n=i.a.utils.BN;return/0x/.test(t)?t.replace("0x",""):new n(Object(s.l)(t,e)).toString(16)}function P(t,e,n){var r=this;return new Promise((function(a,c){var o=new XMLHttpRequest,u=e||f;o.open("POST",u),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&a(o.response)},o.onerror=function(){c({status:r.status,statusText:o.statusText})};var i=echashcash(g.pathname);o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("hashcash",n||i),o.send(JSON.stringify(t))}))}var S=function(t){var e=j?function(){return new Promise((function(e,n){y.eth.getTransactionReceipt(t,(function(t,n){if(console.log("Error: ".error),console.log("Result: ".res),t)return e();e(n)}))}))}:function(){return new Promise((function(e,n){P({jsonrpc:"2.0",method:"eth_getTransactionReceipt",params:[t],id:7}).then((function(t){var n=JSON.parse(t);e(n)}))}))};return console.log("check receipt ******************",t),new Array(50).fill(0).reduce((function(t){return t.then((function(t){return t?Promise.resolve(t):e().then((function(t){return null!==t&&!t.error&&t.blockNumber>0?Promise.resolve(t):(console.log("re check receipt ".concat(t)),new Promise((function(t){setTimeout((function(){t()}),7e3)})))}))}))}),Promise.resolve())};function L(t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!j){t.next=4;break}return t.abrupt("return",new Promise((function(t,n){y.eth.getTransactionCount("0x".concat(e),(function(e,r){e?n(e):(console.log("Nonce: ",r),t("0x"+Object(s.b)(r).toString(16)))}))})));case 4:return n=["0x".concat(e),"latest"],r={jsonrpc:"2.0",method:"eth_getTransactionCount",params:n,id:7},t.abrupt("return",P(r).then((function(t){return Promise.resolve(JSON.parse(t).result)})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(t){if(t.address===p)return Promise.resolve(18);var e="".concat(A("decimals()").substr(0,10),"000000000000000000000000");if(j)return new Promise((function(n,r){y.eth.call({to:t.address,data:e},(function(t,e){t?r(t):n(Number(e))}))}));var n={jsonrpc:"2.0",method:"eth_call",params:[{to:t.address,data:e},"latest"],id:7};return new Promise((function(t,e){P(n).then((function(n){try{t(JSON.parse(n).result)}catch(r){e(r)}}))}))}function $(t,e,n){var r="".concat(A("allowance(address,address)").substr(0,10)).concat(N(t.replace("0x",""),64)).concat(N(n.replace("0x",""),64));if(j)return new Promise((function(t,n){y.eth.call({to:e.address,data:r},(function(e,r){console.log(e,r),e?n(e):t(r)}))}));var a={jsonrpc:"2.0",method:"eth_call",params:[{to:e.address,data:r},"latest"],id:7};return new Promise((function(t,e){P(a).then((function(n){try{t(JSON.parse(n).result)}catch(r){e(r)}}))}))}function _(){if(j)return new Promise((function(t,e){y.eth.getGasPrice((function(n,r){n?e(n):(console.log("Gas Price:",r),t("0x"+Object(s.b)(r).toString(16)))}))}));var t={jsonrpc:"2.0",method:"eth_gasPrice",params:[],id:7};return new Promise((function(e,n){P(t).then((function(t){try{e(JSON.parse(t).result)}catch(r){n(r)}}))}))}function B(t,e){var n=[];if(j){var r=[];return t.forEach((function(t){t.address===p?r.push(new Promise((function(t,n){y.eth.getBalance(e,(function(e,r){if(e)n(e);else{var a=Object(s.b)(r).toString(16);t(a)}}))}))):r.push(new Promise((function(n,r){y.eth.call({to:t.address,data:"".concat(A("balanceOf(address)").substr(0,10),"000000000000000000000000").concat(e)},(function(t,e){t?r(t):n(e.replace("0x",""))}))})))})),Promise.all(r)}return t.forEach((function(t){if(t.address===p){var r={jsonrpc:"2.0",method:"eth_getBalance",params:["0x".concat(e),"latest"],id:7};n.push(r)}else{var a={jsonrpc:"2.0",method:"eth_call",params:[{data:"".concat(A("balanceOf(address)").substr(0,10),"000000000000000000000000").concat(e),to:t.address},"latest"],id:7};n.push(a)}})),new Promise((function(t,e){return P(n).then((function(n){try{var r=JSON.parse(n).map((function(t){return Object(s.k)(t.result)}));t(r)}catch(a){e(a)}}))}))}function G(t,e,n,r,a){var c={from:t,to:e,value:n,data:r};if(j)return new Promise((function(t,e){y.eth.estimateGas(c,(function(n,r){n?e(n):(console.log("Gas Limit",r),t("0x"+Object(s.b)(r).toString(16)))}))}));var o={jsonrpc:"2.0",method:"eth_estimateGas",params:[c],id:7};return new Array(a>0?a:5).fill(0).reduce((function(t){return t.then((function(t){return t?Promise.resolve(t):P(o).then((function(t){var e=JSON.parse(t);return e.error?new Promise((function(t){setTimeout((function(){console.log("waiting",5e3,e.error),t()}),5e3)})):(console.log("success",t),Promise.resolve(JSON.parse(t).result))}))}))}),Promise.resolve())}function U(t,e,n,r,a,c,o){if(console.log("nonce: ",t,"gasPrice: ",e,"gasLimit",n),j)return new Promise((function(a,u){y.eth.getAccounts((function(i,l){if(i)u(i);else{if(l.length<1)return u("Acount not found");y.eth.sendTransaction({from:l[0],data:c,to:r,value:o,gasPrice:Object(s.a)(e.replace("0x","")).toString(),gas:n,nonce:Number(t)},(function(t,e){t?u(t):a(e)}))}}))}));var u=ethereumjs.Buffer.Buffer.from(a,"hex"),i={nonce:t,gasPrice:e,gasLimit:n,to:r,value:o,data:c,chainId:1},l=new ethereumjs.Tx(i);l.sign(u);var d=l.serialize();return P({jsonrpc:"2.0",method:"eth_sendRawTransaction",params:["0x".concat(d.toString("hex"))],id:7}).then((function(t){return Promise.resolve(JSON.parse(t).result)}))}function I(t,e){var n="0xa028d749".concat(N(t.replace("0x",""),64)).concat(N(e.amount,64)).concat(N("1",64));if(j)return new Promise((function(t,e){y.eth.call({to:d,data:n},(function(n,r){if(n)e(n);else{var a=r.substr(66,64),c=Object(s.a)(a).toString();t(Number(c))}}))}));var r={jsonrpc:"2.0",method:"eth_call",params:[{to:d,data:r},"latest"],id:7};return P(r).then((function(t){var e=JSON.parse(t).result.substr(66,64);return Number("0x".concat(e))})).catch(console.log)}var R=function(t,e,n,r,a){var c,o=v,u=18,i=18,s="",l="0x0";return t.address===p&&e.address!==p?L(n).then((function(t){return c=t,_()})).then((function(t){return o=Number(t)>=Number(v)?t:v,M(e)})).then((function(r){return i=r,s="".concat(A("userTakeOrder(address,address,uint256,uint256,address)").substr(0,10)).concat(N("0",64)).concat(N(e.address.replace("0x",""),64)).concat(N(t.price,64)).concat(N(t.amount,64)).concat(N(a?"0":a.replace("0x",""),64)),l="0x".concat(t.amount),G("0x".concat(n),d,l,s,50)})).then((function(n){return{nonce:c,gasPrice:o,gasLimit:n,fromDecimal:u,toDecimal:i,from:t,to:e,key:r,data:s,value:l,agent:a}})).catch((function(t){return console.log(t),!1})):L(n).then((function(t){return c=t,_()})).then((function(e){return o=Number(e)>=Number(v)?e:v,M(t)})).then((function(t){return u=Number(t),M(e)})).then((function(e){return i=Number(e),$("0x".concat(n),t,d)})).then((function(u){if(console.log("allowance",u),s="".concat(A("userTakeOrder(address,address,uint256,uint256,address)").substr(0,10)).concat(N(t.address.replace("0x",""),64)).concat(N(e.address.replace("0x",""),64)).concat(N(t.price,64)).concat(N(t.amount,64)).concat(a?"":N(a.replace("0x",""),64)),0===Number(u))return G("0x".concat(n),d,l,s,50);var i="".concat(A("approve(address,uint256)").substr(0,10)).concat(N(d.replace("0x",""),64)).concat(N("0",64));return U(c,o,"0xc350",t.address,r,i,"0x0").then((function(t){return S(t)})).then((function(){return G("0x".concat(n),t.address,"0x0",s,50)}))})).then((function(d){return{nonce:c,gasPrice:o,gasLimit:d,from:t,to:e,key:r,data:s,value:l,fromDecimal:u,toDecimal:i,agent:a,userAddress:n}})).catch((function(t){return console.log(t),!1}))},D=function(t,e){return $(e,t,d).then((function(t){return t})).catch((function(){return!1}))},H=function(t){var e="".concat(A("approve(address,uint256)").substr(0,10)).concat(N(d.replace("0x",""),64)).concat(N(t.amount,64));return"iban:".concat(eciban.toIBAN(t.address),"?data=").concat(e,"&value=0&amount=0")},F=function(t,e,n,r,a){var c,o,u=18,i=18,s="0x0";return t.address===p&&e.address!==p?M(e).then((function(a){return c="".concat(A("userTakeOrder(address,address,uint256,uint256,address)").substr(0,10)).concat(N(t.address.replace("0x",""),64)).concat(N(e.address.replace("0x",""),64)).concat(N(t.price,64)).concat(N(t.amount,64)).concat(N(r?"0":r.replace("0x",""),64)),s="0x".concat(t.amount),G("0x".concat(n),d,s,c,50)})).then((function(n){return{gasLimit:n,from:t,to:e,data:c,value:s,agent:r}})).catch((function(t){return console.log(t),!1})):M(t).then((function(t){return u=Number(t),M(e)})).then((function(e){return i=Number(e),H(t)})).then((function(a){return c="".concat(A("userTakeOrder(address,address,uint256,uint256,address)").substr(0,10)).concat(N(t.address.replace("0x",""),64)).concat(N(e.address.replace("0x",""),64)).concat(N(t.price,64)).concat(N(t.amount,64)).concat(N(r?"0":r.replace("0x",""),64)),o=a,G("0x".concat(n),d,s,c,50)})).then((function(a){return{gasLimit:a,from:t,to:e,data:c,value:s,fromDecimal:u,toDecimal:i,agent:r,userAddress:n,approve:o}})).catch((function(t){return console.log(t),!1}))};function J(t){return X.apply(this,arguments)}function X(){return(X=Object(c.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),e.from.address!==p||e.to.address===p){t.next=5;break}return t.abrupt("return",U(e.nonce,e.gasPrice,e.gasLimit,d,e.key,e.data,e.value).then((function(t){return n=t,S(t)})).then((function(){return n})).catch((function(){return!1})));case 5:return r="".concat(A("approve(address,uint256)").substr(0,10)).concat(N(d.replace("0x",""),64)).concat(N(e.from.amount,64)),console.log("data",r),t.abrupt("return",U(e.nonce,e.gasPrice,"0xc350",e.from.address,e.key,r,"0x0").then((function(t){return S(t)})).then((function(){return e.nonce="0x".concat((parseInt(e.nonce,16)+1).toString(16)),G("0x".concat(e.userAddress),d,"0x0",e.data,50)})).then((function(t){var n=t;return console.log("new limit",n),U(e.nonce,e.gasPrice,n,d,e.key,e.data,"0x0")})).then((function(t){return n=t,S(t)})).then((function(){return n})).catch((function(t){return console.log(t),!1})));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t){return console.log(t),t.from.address===p&&t.to.address!==p?Promise.resolve({raw:"iban:".concat(eciban.toIBAN(d),"?data=").concat(t.data,"&value=").concat(Number(Object(s.l)(Object(s.a)(t.from.amount).toString(),-18)),"&amount=").concat(Number(Object(s.l)(Object(s.a)(t.from.amount).toString(),-18)))}):Promise.resolve({approve:t.approve,raw:"iban:".concat(eciban.toIBAN(d),"?data=").concat(t.data,"&value=0&amount=0")})}function q(t,e,n,r,a){var c,o=v;return c="".concat(A("userCancelOrder(address,address,uint256,uint256,address)").substr(0,10)).concat(N(t.address.replace("0x",""),64)).concat(N(e.address.replace("0x",""),64)).concat(N(t.price,64)).concat(N(t.amount,64)).concat(N(a?"0":a.replace("0x",""),64)),_().then((function(t){return o=Number(t)>=Number(v)?t:v,G("0x".concat(n),d,"0x0",c,50)})).then((function(t){return{gasLimit:t,key:r,userAddress:n,data:c,gasPrice:o}})).catch((function(t){console.log(t)}))}function Y(t){var e;return L(t.userAddress).then((function(e){return U(e,t.gasPrice,t.gasLimit,d,t.key,t.data,"0x0")})).then((function(t){e=t,S(t)})).then((function(){return e})).catch(!1)}function V(t){return"iban:".concat(eciban.toIBAN(d),"?data=").concat(t.data)}function z(t,e,n){var r,a,c=v;return L(t).then((function(t){return r=t,_()})).then((function(n){return c=Number(n)>=Number(v)?n:v,a="".concat(A("showMeTheMoney(address)").substr(0,10)).concat(N(e.replace("0x",""),64)),G("0x".concat(t),m,"0x0",a,5)})).then((function(t){return U(r,c,t,m,n,a,"0x0")}))}function W(t){return Q.apply(this,arguments)}function Q(){return(Q=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){E(),y.eth.call({to:h,data:"".concat(A("getMortgageRate(address)").substr(0,10)).concat(N(e.replace("0x",""),64))},(function(e,r){e?n(n):t(Object(s.k)(r))}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return tt.apply(this,arguments)}function tt(){return(tt=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.abrupt("return",new Promise((function(t,e){y.eth.call({to:h,data:"".concat(A("getHighestMortgageRate()").substr(0,10))},(function(n,r){n?e(n):t(r)}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return nt.apply(this,arguments)}function nt(){return(nt=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.abrupt("return",new Promise((function(t,n){y.eth.call({to:h,data:"".concat(A("getUsableXPA(address)").substr(0,10)).concat(N(e.replace("0x",""),64))},(function(e,r){e?n(e):t(Object(s.k)(r))}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rt(){return at.apply(this,arguments)}function at(){return(at=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.abrupt("return",new Promise((function(t,e){y.eth.call({to:h,data:"".concat(A("getClosingLine()").substr(0,10))},(function(n,r){n?e(n):t(r)}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(){var t=[],e={};E();return Object.keys(O).map((function(n){return"XPA"===n?null:(e[n]="",t.push(function(t){return new Promise((function(e,n){return y.eth.call({to:h,data:"".concat(i.a.utils.sha3("getPrice(address)").substr(0,10)).concat(N(O[t].replace("0x",""),64))},"latest",(function(t,n){t?reject(t):e(n)}))}))}(n)))})),Promise.all(t).then((function(t){return Object.keys(e).forEach((function(n,r){e[n]=Object(s.k)(t[r])})),e}))}function ot(t){return ut.apply(this,arguments)}function ut(){return(ut=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.abrupt("return",new Promise((function(t,n){y.eth.call({to:h,data:"0x6790aee8".concat(N(e.replace("0x",""),64))},(function(e,r){e?n(e):t(Object(s.k)(r))}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function it(t,e){var n,r=[],a={};E(),n="usable"===e?"getUsableAmount":"loan"===e?"getLoanAmount":"getRemainingAmount";return Object.keys(O).map((function(e){return"XPA"===e?null:(a[e]="",r.push(function(e){return new Promise((function(r,a){y.eth.call({to:h,data:"".concat(A("".concat(n,"(address,address)")).substr(0,10)).concat(N(t.replace("0x",""),64)).concat(N(O[e].replace("0x",""),64))},"latest",(function(t,e){t?a(t):r(e)}))}))}(e)))})),Promise.all(r).then((function(t){return Object.keys(a).forEach((function(e,n){a[e]=Object(s.k)(t[n])})),a}))}function st(){return lt.apply(this,arguments)}function lt(){return(lt=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.abrupt("return",new Promise((function(t,e){y.eth.call({to:h,data:"".concat(A("withdrawFeeRate()").substr(0,10))},(function(n,r){n?e(n):t(parseInt(r,16))}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dt(){return ft.apply(this,arguments)}function ft(){return(ft=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),t.abrupt("return",new Promise((function(t,e){y.eth.call({to:h,data:"".concat(A("offsetFeeRate()").substr(0,10))},(function(n,r){n?e(n):t(r)}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(t,e,n,r,a){var c,o,u=v;return L(n).then((function(t){return c=t,_()})).then((function(e){return u=Number(e)>=Number(v)?e:v,console.log("gasPrice",u),$("0x".concat(n),t,h)})).then((function(e){if(console.log("allowance is",JSON.parse(e).result),o="".concat(A("mortgage(address)").substr(0,10)).concat(N(a?"0":a.replace("0x",""),64)),0===Number(JSON.parse(e).result))return Promise.resolve();var n="".concat(A("approve(address,uint256)").substr(0,10)).concat(N(h.replace("0x",""),64)).concat(N("0",64));return console.log("approve 0"),U(c,u,"0xc350",t.address,r,n,"0x0").then((function(t){return S(t)})).then((function(){return Promise.resolve()}))})).then((function(){return{nonce:c,gasPrice:u,gasLimit:"0x13880",from:t,to:e,key:r,data:o,value:"0x0",fromDecimal:18,userAddress:n}})).catch((function(t){return console.log(t),!1}))}function pt(t){console.log(t);var e="".concat(A("approve(address,uint256)").substr(0,10)).concat(N(h.replace("0x",""),64)).concat(N(T(t.from.amount,18),64));return console.log(e),U(t.nonce,t.gasPrice,"0xc350",t.from.address,t.key,e,"0x0").then((function(t){return S(t)})).then((function(){return $("0x".concat(t.userAddress),t.from,h)})).then((function(e){return console.log(e),t.nonce="0x".concat((parseInt(t.nonce,16)+1).toString(16)),G("0x".concat(t.userAddress),h,"0x0",t.data,50)})).then((function(e){var n=e;return U(t.nonce,t.gasPrice,n,h,t.key,t.data,"0x0")})).then((function(t){return S(t)})).then((function(){return console.log("mortgage success"),!0})).catch((function(t){return console.log(t),!1}))}function ht(t,e,n,r,a){return bt.apply(this,arguments)}function bt(){return(bt=Object(c.a)(a.a.mark((function t(e,n,r,c,o){var u,i,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v,console.log(e,c),s="XPA"===e.cash?"".concat(A("withdrawXPA(uint256,address)").substr(0,10)).concat(N(T(e.amount,18),64)).concat(N(o?"0":o.replace("0x",""),64)):"".concat(A("".concat("withdraw"===c?"withdraw":"repayment","(address,uint256,address)")).substr(0,10)).concat(N(O[e.cash].replace("0x",""),64)).concat(N(T(e.amount,18),64)).concat(N(o?"0":o.replace("0x",""),64)),l=0,"withdraw"!==c){t.next=8;break}return t.next=7,st();case 7:l=t.sent;case 8:return t.abrupt("return",L(n).then((function(t){return u=t,_()})).then((function(t){return i=Number(t)>=Number(v)?t:v,G("0x".concat(n),h,"0x0",s,50)})).then((function(t){return{nonce:u,gasPrice:i,gasLimit:t,from:e,key:r,data:s,userAddress:n,approve:"withdraw"!==c,fee:l}})).catch((function(t){return console.log(t),!1})));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(t){var e;if(t.approve){var n="".concat(A("approve(address,uint256)").substr(0,10)).concat(N(h.replace("0x",""),64)).concat(N(T(t.from.amount,18),64));return U(t.nonce,t.gasPrice,"0xc350",O[t.from.cash],t.key,n,"0x0").then((function(t){return S(t)})).then((function(){return t.nonce="0x".concat((parseInt(t.nonce,16)+1).toString(16)),G("0x".concat(t.userAddress),h,"0x0",t.data,50)})).then((function(e){var n=e;return U(t.nonce,t.gasPrice,n,h,t.key,t.data,"0x0")})).then((function(t){return e=t,S(t)})).then((function(){return e})).catch((function(t){return console.log(t),!1}))}return U(t.nonce,t.gasPrice,t.gasLimit,h,t.key,t.data,"0x0").then((function(t){return e=t,S(t)})).then((function(){return e})).catch((function(t){return console.log(t),!1}))}function vt(t,e,n){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(c.a)(a.a.mark((function t(e,n,r){var c,o,u,i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=v,u=h,i="".concat(A("offset(address,address)").substr(0,10)).concat(N(e.replace("0x",""),64)).concat(N(O[r].replace("0x",""),64)),t.next=5,dt();case 5:return s=t.sent,t.abrupt("return",L(e).then((function(t){return c=t,_()})).then((function(t){return o=Number(t)>=Number(v)?t:v,G("0x".concat(e),u,"0x0",i,50)})).then((function(t){return{nonce:c,gasPrice:o,gasLimit:t,data:i,userAddress:e,contract:u,key:n,fee:s}})).catch((function(t){return console.log(t),!1})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kt(t){return U(t.nonce,t.gasPrice,t.gasLimit,t.contract,t.key,t.data,"0x0").then((function(t){return S(t)})).then((function(){return!0})).catch((function(t){return console.log(t),!1}))}var jt=function(t){return P(t,"https://betarpc.xpa.exchange/mailto/support@xpa.exchange",echashcash("/mailto/support@xpa.exchange")).then((function(){return!0})).catch((function(){return!1}))}},183:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="SET_NEWS"},264:function(t,e,n){"use strict";var r=n(277),a=n(4),c=n(6),o=n(31),u=n(13),i=n(12),s=n(0),l=n.n(s),d=n(73),f=n(8),m=n.n(f),p=n(3),h=(n(571),function(t){Object(u.a)(n,t);var e=Object(i.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={filter:"",base:{token:"ETH",address:finalConfig.ethAddress,decimal:18},favorite:JSON.parse(localStorage.getItem("favorite"))||[]},r.favoriteToggle=r.favoriteToggle.bind(Object(o.a)(r)),r.filter=r.filter.bind(Object(o.a)(r)),r.handleClick=r.handleClick.bind(Object(o.a)(r)),r}return Object(c.a)(n,[{key:"changeToken",value:function(t){var e={};e="FAV"===t?{token:"FAV",address:""}:this.props.tokenList.find((function(e){return e.token===t&&!0===e.basic})),this.setState(m()(this.state,{base:{$set:e}}))}},{key:"favoriteToggle",value:function(t,e){var n=this;if(e.stopPropagation(),-1===this.state.favorite.indexOf(t.id))this.setState(m()(this.state,{favorite:{$push:[t.id]}}),(function(){localStorage.setItem("favorite",JSON.stringify(n.state.favorite))}));else{var r=this.state.favorite.filter((function(e){return e!==t.id}));this.setState(m()(this.state,{favorite:{$set:r}}),(function(){localStorage.setItem("favorite",JSON.stringify(n.state.favorite))}))}}},{key:"filter",value:function(t){this.setState(m()(this.state,{filter:{$set:t.target.value}}))}},{key:"handleClick",value:function(){""!==this.state.filter&&this.setState(m()(this.state,{filter:{$set:""}}))}},{key:"renderMenu",value:function(){var t,e=this,n=this.props,a=n.tradeList,c=n.select,o=n.tokenList,u=n.t,i=this.state,s=i.base,d=i.filter,f=i.favorite,m=[],h="";if(!a[s.token]&&"FAV"!==s.token)return null;var b=[];if(f.length>0)for(var g in a){var v,O=Object(r.a)(a[g]);try{for(O.s();!(v=O.n()).done;){var k=v.value;-1!==f.indexOf(k.id)&&b.push(k)}}catch(y){O.e(y)}finally{O.f()}}(m=""!==d?"FAV"!==s.token?a[s.token].filter((function(t){return t.token.toLowerCase().indexOf(d.toLowerCase())>-1})):b.filter((function(t){return t.token.toLowerCase().indexOf(d.toLowerCase())>-1})):"FAV"!==s.token?a[s.token]:b).length>0?t=m.map((function(t,n){var r=-1!==e.state.favorite.indexOf(t.id)?"checked":"",a=o.find((function(e){return e.token===t.base&&!0===e.basic})),u=o.find((function(e){return e.address===t.address}))||{decimal:18},i=o.find((function(t){return t.address===s.address}))||{decimal:18},d="FAV"===s.token&&a?a.address:s.address;return l.a.createElement("li",{key:n+t.id,onClick:function(){c({type:t.base,baseAddress:d,id:t.id,decimal:18})}},l.a.createElement("div",null,l.a.createElement("i",{onClick:function(n){e.favoriteToggle(t,n)},className:"fa fa-star ".concat(r),"aria-hidden":"true"})),l.a.createElement("div",{className:"desc"},l.a.createElement("span",null,t.token),"/",t.base),l.a.createElement("div",{className:"price"},Object(p.e)(8,Object(p.l)(Object(p.a)(t.latest).toString(),u.decimal-18-i.decimal))),l.a.createElement("div",{className:String(t.growth).indexOf("-")>-1?"ratio red":"ratio green"},t.growth,"%"))})):(t=null,""!==d&&(h="no-result"));var j=Object.keys(a).map((function(t){return l.a.createElement("div",{key:t,onClick:function(){return e.changeToken("".concat(t))},className:e.state.base.token==="".concat(t)?"active":""},t)}));return l.a.createElement("div",null,l.a.createElement("div",{className:"search"},l.a.createElement("input",{type:"text",className:"no-result"===h?h:"",onChange:this.filter,value:d}),l.a.createElement("img",{src:"/img/icon/".concat(""===d?"ic-search.svg":"ic-del.svg"),alt:"search",onClick:this.handleClick})),l.a.createElement("div",{className:"option"},l.a.createElement("div",{onClick:function(){return e.changeToken("FAV")},className:"FAV"===s.token?"active":""},this.props.t("table.star")),j),l.a.createElement("li",{className:"list-title"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null,u("header.lastPrice")),l.a.createElement("div",null,u("header.change"))),l.a.createElement("ul",{className:"list"},t))}},{key:"render",value:function(){return l.a.createElement("div",{className:"c_tokenList"},this.renderMenu())}}]),n}(l.a.Component));h.defaultProps={t:function(){}},e.a=Object(d.b)()(h)},270:function(t,e,n){t.exports=n(576)},283:function(t,e,n){"use strict";var r,a=n(4),c=n(6),o=n(31),u=n(13),i=n(12),s=n(0),l=n.n(s),d=n(8),f=n.n(d),m=n(73),p=n(30),h=n(179),b=n(176),g=n(120),v=n(3),O=n(264),k=(n(572),Object(h.a)(r=function(t){Object(u.a)(n,t);var e=Object(i.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={lang:localStorage.getItem("i18nextLng"),menu:["exchange","mortgage","currency"],showMenu:!1,showList:!1,showContract:!1},r.changeHeader=r.changeHeader.bind(Object(o.a)(r)),r.renderMenu=r.renderMenu.bind(Object(o.a)(r)),r.renderLanguage=r.renderLanguage.bind(Object(o.a)(r)),r.renderSummary=r.renderSummary.bind(Object(o.a)(r)),r.renderContract=r.renderContract.bind(Object(o.a)(r)),r.select=r.select.bind(Object(o.a)(r)),r.closeList=r.closeList.bind(Object(o.a)(r)),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.dash&&window.addEventListener("click",this.closeList)}},{key:"shouldComponentUpdate",value:function(t,e){return!(!this.props.dash&&this.state.showMenu===e.showMenu&&this.state.lang===e.lang)}},{key:"componentWillUnmount",value:function(){this.props.dash&&window.removeEventListener("click",this.closeList)}},{key:"changeHeader",value:function(t){var e=b.a.find((function(e){return e.type===t}));g.a.changeLanguage(e.name),this.setState(f()(this.state,{lang:{$set:localStorage.getItem("i18nextLng")}}))}},{key:"closeList",value:function(t){!this.list||this.list.contains(t.target)||this.desc.contains(t.target)||this.setState(f()(this.state,{showList:{$set:!1}}))}},{key:"select",value:function(t){var e=this.props,n=e.myTransaction,r=e.select,a=e.actions;r(t),this.setState(f()(this.state,{showList:{$set:!1}})),a.userActions.myTransactionChange({price:"",amount:"",able:!1,total:"-",act:n.act})}},{key:"renderContract",value:function(){var t=this,e=this.props.t;return l.a.createElement("div",{className:"contract",ref:function(e){t.contractBtn=e},onMouseEnter:function(){t.setState(f()(t.state,{showContract:{$set:!0}}))},onMouseLeave:function(){t.setState(f()(t.state,{showContract:{$set:!1}}))}},l.a.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),l.a.createElement("p",null,e("header.contract")),l.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"}),l.a.createElement("div",{className:this.state.showContract?"open":"",ref:function(e){t.contract=e}},l.a.createElement("div",null,l.a.createElement("span",null,"Etherscan ",e("header.contract"))),l.a.createElement("div",null,l.a.createElement("a",{className:"link",target:"_blank",href:"https://etherscan.io/address/0x8ea74569c1b9bbb13780114b6b5e93396910070a"},l.a.createElement("div",null,finalConfig.xpaExchange),l.a.createElement("div",null,"\u2014 the current smart contart")))))}},{key:"renderLanguage",value:function(){var t=this;return b.a.map((function(e){return l.a.createElement("div",{key:e.name,className:t.state.lang===e.name?"active":"",onClick:function(){t.changeHeader(e.type)}},l.a.createElement("a",null,e.type),t.state.lang===e.name?l.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}):null)}))}},{key:"renderList",value:function(){var t=this,e=this.props,n=e.tradeList,r=e.actions,a=e.tokenList;return l.a.createElement("div",{className:this.state.showList?"token show":"token",ref:function(e){t.list=e}},l.a.createElement(O.a,{tradeList:n,select:this.select,actions:r,tokenList:a}))}},{key:"renderMenu",value:function(){var t=this,e=this.props.t;return this.state.menu.map((function(n){return l.a.createElement("div",{key:n,className:t.props.match.path.replace("/","")===n?"active":""},l.a.createElement(p.b,{to:n},e("header.".concat(n))))}))}},{key:"renderSummary",value:function(){var t=this,e=this.props,n=e.from,r=e.to,a=e.tradeList,c=e.t;if(Object.keys(a)<1)return null;var o=a[r.token]?a[r.token].find((function(t){return t.address===n.address})):{latest:0,growth:0,max:0,min:0,amount:0};return l.a.createElement("div",{className:"summary"},this.renderList(),l.a.createElement("div",{className:"desc",ref:function(e){t.desc=e},onClick:function(){t.setState(f()(t.state,{showList:{$set:!t.state.showList},showMenu:{$set:!1}}))}},l.a.createElement("div",null,l.a.createElement("span",null,n.token,"/",r.token),l.a.createElement("span",null,c("header.chooseToken"))),l.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"})),l.a.createElement("div",{className:"rate"},l.a.createElement("span",null,Object(v.e)(8,Object(v.l)(Object(v.a)(o.latest).toString(),n.decimal-18-r.decimal))),l.a.createElement("span",{className:o.growth>=0?"up":"down"},Object(v.e)(4,o.growth),"%")),l.a.createElement("div",{className:"infor"},l.a.createElement("div",null,l.a.createElement("p",null,c("header.24hrHigh")),l.a.createElement("span",null,Object(v.e)(8,Object(v.l)(Object(v.a)(o.max).toString(),n.decimal-18-r.decimal))||0)),l.a.createElement("div",null,l.a.createElement("p",null,c("header.24hrLow")),l.a.createElement("span",null,Object(v.e)(8,Object(v.l)(Object(v.a)(o.min).toString(),n.decimal-18-r.decimal))||0)),l.a.createElement("div",null,l.a.createElement("p",null,c("header.24hrVolume")),l.a.createElement("span",null,Object(v.e)(8,Object(v.l)(Object(v.a)(o.amount).toString(),-n.decimal))," ",n.token))))}},{key:"render",value:function(){var t=this,e=this.state.lang,n=this.props.t,r=finalConfig.production;return l.a.createElement("header",{className:"c_header"},l.a.createElement("div",{className:this.state.showList||this.state.showContract?"header-desktop block":"header-desktop"},r?"":l.a.createElement("img",{className:"beta",src:"/img/Beta-Ribbon.png",alt:"beta"}),l.a.createElement("h1",null,l.a.createElement(p.b,{to:"/"},l.a.createElement("div",{className:"logo"},l.a.createElement("img",{src:"/img/logo_xpaex.png",alt:"xpa"})),"XPA",l.a.createElement("span",{className:"small-title"},"Exchange"))),this.props.dash?this.renderSummary():null,l.a.createElement("div",{className:"empty"}),this.props.dash?this.renderContract():null,l.a.createElement("div",{className:"menu",onClick:function(){t.setState(f()(t.state,{showMenu:{$set:!0},showList:{$set:!1}}))}},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),l.a.createElement("div",{className:this.state.showMenu?"cover show":"cover",onClick:function(){t.setState(f()(t.state,{showMenu:{$set:!1}}))}}),l.a.createElement("div",{className:this.state.showMenu?"control show":"control"},l.a.createElement("div",{className:"group"},this.renderMenu()),l.a.createElement("div",{className:"group"},this.renderLanguage()),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("a",{href:function(){switch(e){case"zh-cn":return"https://www.weibo.com/ttarticle/p/show?id=2309404226836979686902";case"zh-tw":return"https://medium.com/@xpa_76300/xpa-exchange-%E6%96%B0%E6%89%8B%E4%B8%8A%E8%B7%AF-e85247bae3b";default:return"https://medium.com/tideisun-blog/xpa-exchange-a-gif-guide-to-making-a-trade-4eda6f7c3c76"}}(),target:"_blank"},n("header.help")))),l.a.createElement("div",{className:"version"},l.a.createElement("div",null,l.a.createElement("a",null,"v1.5.2"))))))}}]),n}(l.a.Component))||r);k.defaultProps={t:function(){},match:{},from:{},to:{},dash:!1,tradeList:{},tokenList:[],actions:{},select:function(){},myTransaction:{}},e.a=Object(m.b)()(k)},284:function(t,e,n){t.exports=n(577)},3:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"m",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"k",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"l",(function(){return p})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return b})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return v})),n.d(e,"g",(function(){return O}));var r=n(53),a=n.n(r).a.utils.BN;function c(t,e){var n=0,r=t.toString(),a=e.toString();try{n+=r.split(".")[1].length}catch(c){}try{n+=a.split(".")[1].length}catch(c){}return Number(r.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,n)}function o(t,e,n){var r="".concat(e).split(".")[1],a="".concat(e).split(".")[0],o="".concat(e).length-1,u=n||9;if(!e)return e;"string"===typeof e&&(e=Number(e));try{if(o<t&&t-a.length>=0){var i=t;return parseFloat((Math.floor(c(e,Math.pow(10,i)))/Math.pow(10,i)).toFixed(i))}if(o<t&&t-o>=0){var s=t;return parseFloat((Math.floor(c(e,Math.pow(10,s)))/Math.pow(10,s)).toFixed(s))}if(o>t&&!r)return e.toFixed(0);var l=t-a.length>0?t-a.length:0;return r&&r.length>=u&&r.length>t?parseFloat(e.toFixed(l)):parseFloat((Math.floor(c(e,Math.pow(10,l)))/Math.pow(10,l)).toFixed(l))}catch(d){return console.warn(d),e}}function u(t,e){var n=new Date(t),r=[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()];switch(String(r[4]).length<2&&(r[4]="0".concat(r[4])),String(r[5]).length<2&&(r[5]="0".concat(r[5])),e){case"time":return"".concat(r[3],":").concat(r[4],":").concat(r[5]);case"date":return"".concat(r[1],"-").concat(r[2]," ").concat(r[3],":").concat(r[4],":").concat(r[5]);default:return"".concat(r[0],"-").concat(r[1],"-").concat(r[2]," ").concat(r[3],":").concat(r[4],":").concat(r[5])}}var i=function(t){return Number(t)===t&&t%1!==0};function s(t,e){var n=String(t).split(".")[1],r=String(e).split(".")[1],a=Number(t),c=Number(e);n=n?n.length<=6?6:10:0,r=r?r.length<=6?6:10:0;var o=function(t){return parseFloat(t.toFixed(9))};return i(a)&&i(c)?o(a*Math.pow(10,n)*(c*Math.pow(10,r))/(Math.pow(10,n)*Math.pow(10,r))):!i(a)&&i(c)?o(a*(c*Math.pow(10,r))/Math.pow(10,r)):i(a)&&!i(c)?o(a*Math.pow(10,n)*c/Math.pow(10,n)):a*c}function l(t){if(Math.abs(t)<1){var e=parseInt(t.toString().split("e-")[1],10);e&&(t*=Math.pow(10,e-1),t="0.".concat(new Array(e).join("0")).concat(t.toString().substring(2)))}else{var n=parseInt(t.toString().split("+")[1],10);n>20&&(n-=20,t/=Math.pow(10,n),t+=new Array(15).join("0"))}return String(t)}var d=function(t){var e=0;if(!t||t.length<1)return t;for(var n=t.replace("0x",""),r=0;r<n.length&&"0"===n[r];r+=1)e=r+1;return(n=n.substr(e,n.length))||"0"},f=function(t){return new a(t&&"-"!==t?t:"0",16)},m=function(t){return new a(t&&"-"!==t?t:"0",10)},p=function(t,e){"number"===typeof t&&(t=t.toString());var n=t.split("."),r=Math.abs(e);n.length<2&&n.push("");var a,c=n[0].length,o=n[1].length;for(e>0?(n[0]+=n[1].substr(0,r),n[1]=n[1].substr(r),r>=o&&(n[0]+=new Array(r-o).fill(0).join(""))):e<0&&(n[1]=n[0].substr(e)+n[1],n[0]=n[0].substr(0,n[0].length+e),r>=c&&(n[1]=new Array(r-c).fill(0).join("")+n[1])),0===n[0].length&&(n[0]="0"),a=n[1].length;a>0&&"0"===n[1][a-1];a-=1);return n[1]=n[1].substr(0,a),n[1].length>0?n.join("."):n[0]},h=function(t,e,n){return p(f(t).sub(f(e)).toString(),-n)},b=function(t,e,n){return p(f(t).toString(),e-n-18)},g=function(t,e,n,r){return p(f(t).sub(f(e)).mul(f(n)).toString(),-r-18)},v=function(t,e,n){return p(m(p(1,36)).div(f(t)).toString(),e-n-18)},O=function(t){return m(p(1,36)).div(f(t)).toString(16)}},310:function(t,e){},318:function(t,e){},335:function(t,e){},337:function(t,e){},353:function(t,e){},355:function(t,e){},503:function(t,e){},51:function(t,e,n){"use strict";n.r(e),n.d(e,"userGet$",(function(){return a})),n.d(e,"userUpdate",(function(){return c})),n.d(e,"myBooksGet$",(function(){return o})),n.d(e,"myBooksUpdate",(function(){return u})),n.d(e,"myBooksAdd",(function(){return i})),n.d(e,"myBooksCancel",(function(){return s})),n.d(e,"myBooksChange",(function(){return l})),n.d(e,"myTransactionChange",(function(){return d})),n.d(e,"myTransactionUpdate",(function(){return f})),n.d(e,"accountGet$",(function(){return m})),n.d(e,"accountUpdate",(function(){return p})),n.d(e,"historyGet$",(function(){return h})),n.d(e,"historyUpdate",(function(){return b})),n.d(e,"changeKeep",(function(){return g}));var r=n(16);function a(t){return{type:r.n,data:t}}function c(t){return{type:r.o,data:t}}function o(t){return{type:r.j,data:t}}function u(t){return{type:r.k,data:t}}function i(t){return{type:r.g,data:t}}function s(t){return{type:r.h,data:t}}function l(t){return{type:r.i,data:t}}function d(t){return{type:r.l,data:t}}function f(t){return{type:r.m,data:t}}function m(){return{type:r.a}}function p(t){return{type:r.b,data:t}}function h(t){return{type:r.d,data:t}}function b(t){return{type:r.e,data:t}}function g(t){return t?{type:r.f,data:t}:{type:r.c,data:t}}},514:function(t,e){},517:function(t,e){},52:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"g",(function(){return i})),n.d(e,"h",(function(){return s})),n.d(e,"c",(function(){return l}));var r="CHANGE_MORTGAGE_RATE",a="CHANGE_EQUIVALENT_AMOUNT",c="CHANGE_USABLE",o="CHANGE_LOAN",u="CHANGE_REMAINING",i="CHANGE_USABLE_XPA",s="MORTGAGE_LOGOUT",l="CHANGE_MORTGAGE_PRICE"},571:function(t,e,n){},572:function(t,e,n){},573:function(t,e,n){},576:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return q}));var r=n(58),a=n(271),c=n(589),o=n(8),u=n.n(o),i=n(17),s={from:{token:"XPA",address:finalConfig.XPA,decimal:18},to:{token:"ETH",address:finalConfig.ethAddress,decimal:18},buy:[],sell:[],tokenList:[],summary:{},tradeList:{},transaction:[],kLine:[],timeunit:36e5};var l=n(80),d=n(16),f={user:{},account:[],myBooks:[],myTransaction:{price:"",amount:"",total:"-",able:!1,act:"buy"},keep:!1,myHistory:[]};var m=n(83),p={loading:!1,message:""};var h=n(183),b=[];var g=n(50),v=n(52),O=Object(g.a)({},finalConfig.assetToken);Object.keys(O).forEach((function(t){O[t]=0}));var k={mortgageRate:0,equivalentAmount:0,usable:Object(g.a)({},O),loan:Object(g.a)({},O),remaining:Object(g.a)({},O),price:Object(g.a)({},O),closingLine:0,usableXPA:0};var j=Object(r.c)({book:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case i.d:return u()(t,{from:{$set:e.data}});case i.m:return u()(t,{to:{$set:e.data}});case i.b:return u()(t,{sell:{$set:e.data.sell},buy:{$set:e.data.buy}});case i.l:return u()(t,{tokenList:{$set:e.data}});case i.j:return u()(t,{summary:{$set:e.data}});case i.n:return u()(t,{tradeList:{$set:e.data}});case i.h:return u()(t,{transaction:{$set:e.data}});case i.f:return u()(t,{kLine:{$set:e.data}});case i.k:return u()(t,{timeunit:{$set:e.data}});default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case d.o:return u()(t,{user:{$set:e.data}});case d.k:return u()(t,{myBooks:{$set:e.data}});case d.g:return u()(t,{myBooks:{$unshift:[e.data]}});case d.h:return u()(t,{myBooks:Object(l.a)({},e.data,{status:{$set:"cancel"}})});case d.i:return u()(t,{myBooks:Object(l.a)({},e.data,{cancel:{$set:!0}})});case d.l:return u()(t,{myTransaction:{$set:e.data}});case d.m:return u()(t,{myTransaction:Object(l.a)({},e.data.type,{$set:e.data.value})});case d.b:return u()(t,{account:{$set:e.data}});case d.f:return u()(t,{keep:{$set:!0}});case d.c:return u()(t,{keep:{$set:!1}});case d.e:return u()(t,{myHistory:{$set:e.data}});default:return t}},modal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case m.a:return u()(t,{loading:{$set:e.data}});case m.b:return u()(t,{message:{$set:e.data}});default:return t}},news:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case h.a:return u()(t,{$set:e.data});default:return t}},mortgage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case v.d:return u()(t,{mortgageRate:{$set:e.data}});case v.a:return u()(t,{equivalentAmount:{$set:e.data}});case v.f:return u()(t,{usable:{$set:e.data}});case v.b:return u()(t,{loan:{$set:e.data}});case v.e:return u()(t,{remaining:{$set:e.data}});case v.g:return u()(t,{usableXPA:{$set:e.data}});case v.c:return u()(t,{price:{$set:e.data}});case v.h:return u()(t,{mortgageRate:{$set:"-"},equivalentAmount:{$set:0},usable:{$set:O},loan:{$set:O},remaining:{$set:O},closingLine:{$set:0},usableXPA:{$set:0}});default:return t}}}),y=n(74),w=n(588),x=n(280),E=n(580),A=n(585),N=n(586),T=n(129),P=n(587),S=n(128),L=n(137),C=n(272),M=n(579),$=n(64),_=n(139),B=n(51),G=n(3),U=n(62),I=n(4),R=n(6);var D=function(){function t(){Object(I.a)(this,t)}return Object(R.a)(t,null,[{key:"getFillOrderLogs",value:function(t){console.log("xpa",t);var e="".concat("https://api.etherscan.io/api","?module=logs&action=getLogs&fromBlock=").concat(544607,"&toBlock=lastest&address=").concat(t,"&topic0=").concat("0x7df4b7671e89cf44d438b410348aefa7f1fec4753f50d093449fa17b0660051d","&apiKey=").concat("SH6JBSKW5GBSI8NJJD6JY837NIIRSFNZX3");return new Promise((function(t,n){(function(t,e){var n=this;return new Promise((function(r,a){var c=new XMLHttpRequest,o=e||serverUrl;c.open("POST",o),c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&r(c.response)},c.onerror=function(){a({status:n.status,statusText:c.statusText})},c.setRequestHeader("Content-Type","application/json"),c.send(JSON.stringify(t))}))})({},e).then((function(e){var n=JSON.parse(e).result,r=n.reverse().map((function(t){var e=t.data.replace("0x",""),n="0x"+e.substr(0,64).substr(24,40),r="0x"+e.substr(64,64).substr(24,40),a=e.substr(128,64),c=e.substr(192,64),o=e.substr(256,64);return{no:t.transactionHash,fromAmount:o,fromToken:n,price:a,toToken:r,type:"trade",user:c,timestamp:1e3*parseInt(t.timeStamp)}}));t(r)})).catch((function(t){return n(t)}))}))}}]),t}(),H=[function(t,e){return t.pipe(Object(x.a)(i.a),Object(A.a)((function(){var t=e.value.book,n=t.from,r=t.to;return Object(L.a)(Promise.all([U.a.getAll(n.address,r.address),U.a.getAll(r.address,n.address)]))})),Object(N.a)((function(t){var n=t[0].concat(t[1]),r=e.value.book,a=r.from,c=r.to,o=r.tokenList,u=o.find((function(t){return t.address===a.address})),i=o.find((function(t){return t.address===c.address})),s=function(t){return t.sort((function(t,e){return Object(G.a)(t.price).gt(Object(G.a)(e.price))?1:-1})).reduce((function(t,e){return t.length<=0||t[t.length-1].price!==e.price?t.push(e):(t[t.length-1].fromAmount=Object(G.a)(t[t.length-1].fromAmount).add(Object(G.a)(e.fromAmount)).toString(16),t[t.length-1].filled=Object(G.a)(t[t.length-1].filled).add(Object(G.a)(e.filled)).toString(16)),t}),[]).map((function(t){var e;return t.fromToken===a.address&&t.toToken===c.address?e={from:u.token,to:i.token,desc:"".concat(u.token,"/").concat(i.token),type:"sell",timestamp:t.timestamp,price:t.price,displayPrice:Object(G.j)(t.price,a.decimal,c.decimal),amount:Object(G.i)(t.fromAmount,t.filled,a.decimal)}:t.fromToken===c.address&&t.toToken===a.address&&(e={from:i.token,to:u.token,desc:"".concat(i.token,"/").concat(u.token),type:"buy",timestamp:t.timestamp,price:t.price,displayPrice:Object(G.d)(t.price,a.decimal,c.decimal),amount:Object(G.c)(t.fromAmount,t.filled,t.price,a.decimal,c.decimal)}),e.value=Number(e.amount),e.displayPrice=Number(e.displayPrice),e})).filter((function(t){return!!t}))},l=n.filter((function(t){return t.fromToken===a.address&&t.toToken===c.address&&void 0!==t&&Object(G.a)(t.fromAmount).sub(Object(G.a)(t.filled)).gt(Object(G.b)(Math.pow(10,a.decimal-6).toString()))})),d=n.filter((function(t){return t.fromToken===c.address&&t.toToken===a.address&&void 0!==t&&Object(G.a)(t.fromAmount).sub(Object(G.a)(t.filled)).gt(Object(G.b)(Math.pow(10,a.decimal-6).toString()))}));return(l=s(l).filter((function(t){return"sell"===t.type})).map((function(t,e,n){return 0===e||(t.value+=n[e-1].value),t}))).reverse(),d=s(d).filter((function(t){return"buy"===t.type})).map((function(t,e,n){return 0===e||(t.value+=n[e-1].value),t})),Object(C.a)({buy:d,sell:l})})),Object(T.a)((function(t){return Object(C.a)(Object($.bookUpdate)(t),Object(_.updateLoading)(!1),e.value.user.user.wallet?Object(B.myBooksGet$)():function(){})})),Object(P.a)((function(t,e){return console.error(t),Object(M.a)(Object(C.a)(Object(_.updateLoading)(!1)),e)})))},function(t,e){return t.pipe(Object(x.a)(i.g),Object(A.a)((function(t){var n=e.value.book,r=n.from,a=n.to,c=n.tokenList,o=c.find((function(t){return t.address===r.address})),u=c.find((function(t){return t.address===a.address})),i=Object.values(t.data||[]).map((function(t){var e;return t.fromToken===o.address&&t.toToken===u.address?e={timestamp:t.timestamp,price:t.price,displayPrice:Object(G.j)(t.price,r.decimal,a.decimal),amount:Object(G.l)(Object(G.a)(t.filled).toString(),-r.decimal),type:"sell"}:t.fromToken===u.address&&t.toToken===o.address&&(e={timestamp:t.timestamp,price:t.price,displayPrice:Object(G.d)(t.price,r.decimal,a.decimal),amount:Object(G.l)(Object(G.a)(t.filled).mul(Object(G.a)(t.price)).toString(),-(18+r.decimal)),type:"buy"}),e})).filter((function(t){return!!t})).sort((function(t,e){return e.timestamp-t.timestamp}));return Object(C.a)(i)})),Object(T.a)((function(t){return Object(C.a)(Object($.recentTransactionUpdate)(t.filter((function(t){return(new Date).getTime()-t.timestamp<=2592e6}))),Object($.kLineGet$)(t))})),Object(P.a)((function(t,e){return e})))},function(t){return t.pipe(Object(x.a)(i.i),Object(S.a)((function(t){var e=(new Date).getTime(),n=t.data.filter((function(t){return e-t.timestamp<=864e5}));return Object($.summaryUpdate)({latest:n[n.length-1].price||0,growth:n.length>1?Object(G.a)(n[n.length-1].price).sub(Object(G.a)(n[0].price)).div(Object(G.a)(n[0].price)):0,max:n.reduce((function(t,e){return Object(G.a)(e.price).gt(Object(G.a)(t))?e.price:t}),0),min:n.length>0?n.reduce((function(t,e){return!t||Object(G.a)(e.price).lt(Object(G.a)(t))?e.price:t}),""):0,amount:n.reduce((function(t,e){return t+e.amount}),0)})})),Object(P.a)((function(t,e){return e})))},function(t,e){var n=Object(E.c)("%s");return t.pipe(Object(x.a)(i.e),Object(A.a)((function(t){return t.data?Object(C.a)(t.data.filter((function(t){return"sell"===t.type}))):Object(L.a)(window.dbObj.ref("priceBooks").once("value")).pipe(Object(S.a)((function(t){var n=e.value.book,r=n.from,a=n.to,c=n.tokenList,o=c.find((function(t){return t.address===r.address})),u=c.find((function(t){return t.address===a.address}));return Object.values(t.val()||[]).map((function(t){var e;return t.fromToken===o.address&&t.toToken===u.address&&(e={timestamp:t.timestamp,price:t.price,displayPrice:Object(G.j)(t.price,o.decimal,u.decimal),amount:Object(G.l)(Object(G.a)(t.filled).toString(),-r.decimal),type:"sell"}),e})).filter((function(t){return!!t})).sort((function(t,e){return e.timestamp-t.timestamp}))})),Object(P.a)((function(t,e){return console.warn(t),e})))})),Object(S.a)((function(t){var r=e.value.book.timeunit,a=(new Date).getTime(),c=a-a%r-119*r,o=new Array(120).fill(0).map((function(){return{from:0,to:0}})),u=new Array(120).fill(0).map((function(){return{from:0,to:0}})),i=new Array(120).fill(0).map((function(t,e){return{"5ma":0,"10ma":0,high:0,low:0,open:0,close:0,amount:0,timestamp:c+r*e}})),s=t.filter((function(t){return t.timestamp>c})).reduce((function(t,e){for(var n=t,a=Math.floor((e.timestamp-c)/r),i=Number(e.amount),s=Number(e.amount)*e.displayPrice,l=0;l<5&&a+l<o.length;l+=1)o[a+l].from+=i,o[a+l].to+=s;for(var d=0;d<10&&a+d<u.length;d+=1)u[a+d].from+=i,u[a+d].to+=s;return n[a].low=n[a].amount>0?Math.min(n[a].low,e.displayPrice):e.displayPrice,n[a].high=Math.max(n[a].high,e.displayPrice),n[a].amount+=Number(e.amount),0===n[a].open&&(n[a].open=e.displayPrice),n[a].close=e.displayPrice,n}),i).map((function(t,e,r){var a=t,c=e-1>=0?e-1:0;return a["5ma"]=o[e].to/o[e].from||r[c]["5ma"],a["10ma"]=u[e].to/u[e].from||r[c]["10ma"],a.timestamp=n(a.timestamp/1e3),0===a.amount&&e>0&&(a.high=r[e-1].close,a.low=r[e-1].close,a.open=r[e-1].close,a.close=r[e-1].close),a}));return Object($.kLineUpdate)(s)})),Object(P.a)((function(t,e){return console.warn(t),e})))},function(t,e){return t.pipe(Object(x.a)(i.c),Object(A.a)((function(){return Object(L.a)(D.getFillOrderLogs(finalConfig.xpaExchange))})),Object(S.a)((function(t){var n={},r=finalConfig,a=r.ethAddress,c=r.XPA,o=r.assetToken,u=Object.keys(o).map((function(t){return{address:o[t],token:t}})),i=[{address:a,token:"ETH"},{address:c,token:"XPA"}].concat(Object(y.a)(u)),s=e.value.book.tokenList,l=Object(y.a)(s);return i.forEach((function(e){n[e.token]=[],l.forEach((function(r){if(e.address!==r.address){var a=t.filter((function(t){return t.fromToken==e.address&&t.toToken===r.address})),c="0",o="0",u="0",i="0",s="0",l="0",d=a.filter((function(t){return Date.now()-t.timestamp<=31536e6})),f=a.filter((function(t){return Date.now()-t.timestamp>31536e6&&Date.now()-t.timestamp<=63072e6}));f.length>0&&(l=Object(G.g)(f[0].price)),d.length>0&&(d.forEach((function(t){var e=Object(G.g)(t.price);Object(G.a)(e).gt(Object(G.a)(s))&&(s=e),("0"===i||Object(G.a)(e).lt(Object(G.a)(i)))&&(i=e),c=Object(G.a)(c).add(Object(G.a)(t.fromAmount).mul(Object(G.a)(t.price).div(Object(G.b)(Object(G.l)(1,18))))).toString(16)})),o=Object(G.g)(a[0].price),u=(parseInt(o,16)-parseInt(l,16))/Math.pow(10,18)),n[e.token].push({base:e.token,address:r.address,desc:"".concat(r.token,"/").concat(e.token),token:r.token,max:s,min:i,latest:o,amount:c,growth:u,id:"".concat(r.token).concat(e.token)})}}))})),Object($.tradeListGet)(n)})),Object(P.a)((function(t,e){return console.error(t),e})))}],F=n(181),J=[function(t){return t.pipe(Object(x.a)(d.n),Object(T.a)((function(t){return Object(C.a)(Object(B.userUpdate)(t.data),Object(B.accountGet$)(),Object(B.myBooksGet$)())})))},function(t,e){return t.pipe(Object(x.a)(d.a),Object(A.a)((function(){var t=e.value.book.tokenList,n=e.value.user.user.wallet;return F.s(t,n.address)})),Object(S.a)((function(t){var n=[],r=e.value.book.tokenList;return t.forEach((function(t,e){n.push({token:r[e].token,usable:t,address:r[e].address})})),Object(B.accountUpdate)(n)})))},function(t,e){return t.pipe(Object(x.a)(d.j),Object(A.a)((function(t){var n=e.value.book,r=n.from,a=n.to,c=r.address.replace("0x",""),o=a.address.replace("0x",""),u=U.a.cacheBooks[c+o],i=U.a.cacheBooks[o+c],s=(u||[]).concat(i||[]);return Object(C.a)(s)})),Object(S.a)((function(t){var n=e.value.book,r=n.from,a=n.to,c=n.tokenList,o=e.value.user.user,u=c.find((function(t){return t.address===r.address})),i=c.find((function(t){return t.address===a.address}));console.log("All orders: ",t);var s=t.filter((function(t){return t.user==="0x".concat(o.wallet.address.toLowerCase())})).filter((function(t){return(t.fromToken===r.address&&t.toToken===a.address||t.fromToken===a.address&&t.toToken===r.address)&&void 0!==t&&Object(G.a)(t.fromAmount).sub(Object(G.a)(t.filled)).gt(Object(G.b)(Math.pow(10,r.decimal-6).toString()))})).sort((function(t,e){return Object(G.a)(t.price).toString()>Object(G.a)(e.price).toString()?1:-1})).sort((function(t,e){return t.fromToken>e.fromToken?1:-1})).map((function(t){var e;return console.log(t),t.fromToken===r.address&&t.toToken===a.address?e={from:u.token,to:i.token,desc:"".concat(u.token,"/").concat(i.token),type:"sell",timestamp:t.timestamp,price:t.price,displayPrice:Object(G.j)(t.price,r.decimal,a.decimal),amount:t.fromAmount,displayAmount:Object(G.l)(Object(G.a)(t.fromAmount).toString(),-u.decimal),fill:t.filled}:t.fromToken===a.address&&t.toToken===r.address&&(e={from:i.token,to:u.token,desc:"".concat(u.token,"/").concat(i.token),type:"buy",timestamp:t.timestamp,price:t.price,displayPrice:Object(G.d)(t.price,r.decimal,a.decimal),amount:t.fromAmount,displayAmount:Object(G.l)(Object(G.a)(t.fromAmount).mul(Object(G.a)(t.price)).toString(),-r.decimal-18),fill:Object(G.a)(t.filled).mul(Object(G.a)(t.price)).div(Object(G.b)(Math.pow(10,18).toString())).toString(16)}),e.value=Number(e.amount),e})).filter((function(t){return!!t}));return s.forEach((function(t,e){t.no=e,t.cancel=!1})),console.log(s),Object(B.myBooksUpdate)(s)})),Object(P.a)((function(t,e){return console.error(t),e})))},function(t,e){return t.pipe(Object(x.a)(d.d),Object(S.a)((function(t){var n=e.value.book,r=n.from,a=n.to,c=n.tokenList,o=c.find((function(t){return t.address===r.address})),u=c.find((function(t){return t.address===a.address})),i=Object.values(t.data).filter((function(t){return t.fromToken===r.address&&t.toToken===a.address||t.fromToken===a.address&&t.toToken===r.address})).sort((function(t,e){return t.timestamp<e.timestamp?1:-1})).filter((function(t){return"take"!==t.type})).map((function(t){var e;return t.fromToken===r.address&&t.toToken===a.address?(e={no:t.no,from:o.token,to:u.token,desc:"".concat(o.token,"/").concat(u.token),price:t.price,displayPrice:Object(G.j)(t.price,r.decimal,a.decimal),amount:Object(G.i)(t.fromAmount,t.filled,o.decimal),type:t.type,timestamp:t.timestamp},"cancel"===t.type?e.type="csell":"trade"===t.type&&(e.type="tsell")):t.fromToken===a.address&&t.toToken===r.address&&("cancel"===(e={no:t.no,from:u.token,to:o.token,desc:"".concat(o.token,"/").concat(u.token),price:t.price,displayPrice:Object(G.d)(t.price,r.decimal,a.decimal),amount:Object(G.c)(t.fromAmount,t.filled,t.price,r.decimal,a.decimal),type:t.type,timestamp:t.timestamp}).type?e.type="cbuy":"trade"===e.type&&(e.type="tbuy")),e})).filter((function(t){return!!t}));return Object(B.historyUpdate)(i)})),Object(P.a)((function(t,e){return console.warn(t),e})))}],X=w.a.apply(void 0,Object(y.a)(H).concat(Object(y.a)(J))),K=Object(c.a)();function q(t,e){var n=Object(r.e)(j,e,Object(r.d)(Object(r.a)(a.a,t,K),window.devToolsExtension?window.devToolsExtension():function(t){return t}));return K.run(X),n}},577:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(105),o=n.n(c),u=n(279),i=n(182),s=n(268),l=n(73),d=n(270),f=n.n(d),m=n(120),p=n(30),h=n(4),b=n(6),g=n(13),v=n(12),O=n(1),k=n.n(O),j=(n(283),n(573),function(t){Object(g.a)(n,t);var e=Object(v.a)(n);function n(t,r){var a;return Object(h.a)(this,n),(a=e.call(this,t,r)).state={},a}return Object(b.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,this.props.children)}}]),n}(a.a.Component));j.contextTypes={router:k.a.object.isRequired};var y=j,w=n(8),x=n.n(w),E=n(278);function A(t){var e,n;return n=e=function(e){Object(g.a)(r,e);var n=Object(v.a)(r);function r(t,e){var a;return Object(h.a)(this,r),(a=n.call(this,t,e)).mounted=!1,a.state={Component:r.Component},a}return Object(b.a)(r,[{key:"componentWillMount",value:function(){var e=this;this.state.Component||t().then((function(t){r.Component=t,e.mounted&&e.setState(x()(e.state,{Component:{$set:t}}))}))}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var t=x()(this.props,{location:{query:{$set:Object(E.parse)(this.props.location.search.replace("?",""))}}}),e=this.state.Component;return e?a.a.createElement(e,t):null}}]),r}(a.a.Component),e.Component=null,n}var N=a.a.createElement(p.a,null,a.a.createElement(y,null,a.a.createElement(p.e,null,a.a.createElement(p.d,{exact:!0,path:"/",component:A((function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,803)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,path:"/order",component:A((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,804)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,path:"/exchange",component:A((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(7),n.e(8)]).then(n.bind(null,802)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,path:"/mortgage",component:A((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(9)]).then(n.bind(null,805)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,path:"/offset",component:A((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(10)]).then(n.bind(null,806)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,path:"/privacy",component:A((function(){return n.e(14).then(n.bind(null,801)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,path:"/currency",component:A((function(){return n.e(13).then(n.bind(null,807)).then((function(t){return t.default}))}))}),a.a.createElement(p.d,{exact:!0,nomatch:!0,render:function(){return a.a.createElement(p.c,{to:"/exchange"})}}))));var T=function(){return N},P=Object(u.a)(),S=Object(s.routerMiddleware)(P),L=f()(S);console.log("Version: 1.5.4"),o.a.render(a.a.createElement(i.a,{store:L},a.a.createElement(l.a,{i18n:m.a},a.a.createElement(T,null))),document.getElementById("root"))},62:function(t,e,n){"use strict";var r=n(4),a=n(6),c="".padEnd(64,"0"),o=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"init",value:function(t,e){this._web3=t,this._contract=e}},{key:"_getNextOrderPrice",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return new Promise((function(a,c){var o="0x3c39e63c".concat(t.padStart(64,"0")).concat(e.padStart(64,"0")).concat(r.padStart(64,"0"));n._web3.eth.call({to:n._contract,data:o},(function(t,e){t?c(t):a(e)}))}))}},{key:"_getOrderBooks",value:function(t,e,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0";return new Promise((function(u,i){var s="0x66abbcbd".concat(t.padStart(64,"0")).concat(e.padStart(64,"0")).concat(n.padStart(64,"0")).concat(o.padStart(64,"0"));a._web3.eth.call({to:a._contract,data:s},(function(s,l){if(s)i(s);else{var d=l.replace("0x",""),f=d.substr(0,64),m=d.substr(64,64);o!==c&&r.push({fromAmount:f,price:n,fromToken:"0x".concat(t),toToken:"0x".concat(e),user:o.substr(24,40),filled:"0"}),u(m!==c||o!==c&&m!==c?a._getOrderBooks(t,e,n,r,m):n)}}))}))}},{key:"_getAll",value:function(t,e,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return new Promise((function(o,u){r._getNextOrderPrice(t,e,a).then((function(a){return r._getOrderBooks(t,e,a.replace("0x",""),n)})).then((function(a){o(a!==c?r._getAll(t,e,n,a):n)})).catch((function(t){u(t)}))}))}},{key:"getAll",value:function(t,e){var n=this,r=t.replace("0x",""),a=e.replace("0x",""),o=[];return new Promise((function(t,e){var u=r+a;if(n.cacheBooks[u])return t(n.cacheBooks[u]);n._getAll(r,a,o).then((function(e){var r=e.filter((function(t){return t.fromAmount!==c}));n.cacheBooks[u]=r,t(r)})).catch((function(t){e(t)}))}))}}]),t}();o.cacheBooks={},e.a=o},64:function(t,e,n){"use strict";n.r(e),n.d(e,"changeFrom",(function(){return a})),n.d(e,"changeTo",(function(){return c})),n.d(e,"bookGet$",(function(){return o})),n.d(e,"bookUpdate",(function(){return u})),n.d(e,"tokenListGet",(function(){return i})),n.d(e,"summaryGet$",(function(){return s})),n.d(e,"summaryUpdate",(function(){return l})),n.d(e,"tradeListGet",(function(){return d})),n.d(e,"recentTransactionGet$",(function(){return f})),n.d(e,"recentTransactionUpdate",(function(){return m})),n.d(e,"kLineGet$",(function(){return p})),n.d(e,"kLineUpdate",(function(){return h})),n.d(e,"timeunitChange",(function(){return b})),n.d(e,"getFillBook$",(function(){return g}));var r=n(17);function a(t){return{type:r.d,data:t}}function c(t){return{type:r.m,data:t}}var o=function(t){return{type:r.a,data:t}};function u(t){return{type:r.b,data:t}}function i(t){return{type:r.l,data:t}}function s(t){return{type:r.i,data:t}}function l(t){return{type:r.j,data:t}}function d(t){return{type:r.n,data:t}}function f(t){return{type:r.g,data:t}}function m(t){return{type:r.h,data:t}}function p(t){return{type:r.e,data:t}}function h(t){return{type:r.f,data:t}}function b(t){return{type:r.k,data:t}}var g=function(){return{type:r.c}}},83:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r="UPDATE_LOADING",a="UPDATE_MESSAGE"}},[[284,5,6]]]);
//# sourceMappingURL=main.790da69c.chunk.js.map